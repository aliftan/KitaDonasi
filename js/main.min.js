/*! Kita Bisa */

;(function ( window, document, undefined ) {

    var isDesktop = Modernizr.mq('screen and (min-width: 64em)');
    var isTablet = Modernizr.mq('screen and (min-width: 48em)');

    var assets = {
        _jquery_cdn      : '//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js',
        _jquery_local    : path.js + 'jquery.min.js',
        _jquery_mobile   : path.js + 'jquery.mobile.min.js',
        _translate       : '//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit',
        _slick           : path.js + 'slick.min.js',
        _validate        : path.js + 'jquery.validate.min.js',
        _autoNum         : path.js + 'autoNumeric.min.js?id=5cb207d4848596c67376104c77c4dc14',
        _datepicker      : path.js + 'bootstrap-datepicker.min.js',
        _chosen          : [path.js + 'chosen.jquery.min.js', path.css + 'chosen.css'],
        _autocomplete    : path.js + 'jquery.autocomplete.min.js',
        _redactor        : [path.js + 'redactor.min.js', path.js + 'video.min.js'],
        _lazyLoad        : path.js + 'jquery.lazyload.min.js',
        _dataTable       : [path.js + 'jquery.dataTables.min.js', path.css + 'jquery.dataTables.css'],
        _smoothScroll    : path.js + 'jquery.smoothScroll.min.js',
        _fontawesome_cdn : 'https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css',
        _handlebars      : path.js + 'handlebars.min.js',
        _lightbox        : path.js + 'lightbox.min.js',
        _typer           : path.js + 'typed.min.js',
        _cropper         : path.js + 'cropper.min.js',
        _cropperInspinia : path.js + 'cropper-inspinia.min.js',
        _sprintF         : path.js + 'sprintf.min.js',
        _bazeValidate    : path.js + 'baze.validate.min.js',
        _toast           : path.js + 'toastr.min.js',
        _dataTableInspinia : path.js + 'datatables.min.js',
        _dataTableRes    : path.js + 'datatables.responsive.min.js',
        _dataCountdown   : path.js + 'jquery.countdown.min.js',
        _clipboardCDN    : 'https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.5/clipboard.min.js',
        _momentJS        : path.js + 'moment.min.js',
        _itemslide       : path.js + 'itemslide.min.js',
        _dlbanner        : path.js + 'jquery.smartbanner.min.js',
        _owlCarousel     : path.js + 'owl.carousel.min.js'
    };

    var Site = {

        init: function () {
            Site.mainHeight();
            Site.headerOpt();
            Site.slider();
            // Site.slideTab();
            // Site.selectNav();
            // Site.yesNo();
            // Site.cloneTitle();
            Site.videoFluid();
            Site.coverProject();
            Site.autoThousand();
            Site.chooseReward();
            Site.stepNav();
            Site.notif();
            Site.tabNav();
            Site.tabNavWrapper();
            Site.scrollToElement();
            Site.datePicker();
            Site.customRadio();
            Site.chosen();
            Site.togglePost();
            Site.textEditor();
            Site.maxCharInput();
            Site.customPhotoUpload();
            Site.dashboardNav();
            Site.dataTable();
            Site.fundraiserShowmore();
            Site.loadMoreCampaignsOnPartnerPage();
            Site.loadDonatur();
            Site.initTyper();
            Site.dashboardCampaignMore();
            Site.initCropper();
            Site.initCropper2();
            Site.initCropper3();
            Site.copyText();
            Site.successSwitch();
            Site.rewardModal();
            Site.bazeValidate();
            Site.overviewUpdate();
            Site.walletPay();
            Site.flashToast();
            Site.faqAccordion();
            Site.singleAccordion();
            Site.groupAccordion();
            Site.minDate();
            Site.minDonate();
            Site.triggerFirstLoader();
            Site.customGAEvents();
            Site.pwaHeaderPosition();
            Site.pwaSearch();
            Site.pwaRemoveSearchResult();
            Site.donaturFilter();
            Site.pwaCampaignTab();
            Site.exploreFilter();
            Site.toggleSearch();
            Site.pwaPay();
            Site.pwaLoader();
            Site.miniTabs();
            Site.modalTime();
            Site.modalOpen();
            Site.modalClose();
            Site.modalFbShare();
            Site.switcher();
            Site.termsDonation();
            Site.termsCampaigner();
            Site.carouselCard();
            Site.autoFillLink();
            Site.newPwaNav();
            Site.removeLoader();
            Site.customDropdownTime();
            Site.customDropdownClose();
            Site.pwaSearchFilter();
            Site.partnerFilter();
            Site.pageTab();
            Site.pwaVerifikasi();
            Site.pwaStickyCampaignTab();
            Site.generalAjaxLoad();
            Site.generalAjaxScroll();
            Site.scrollToFixNav();
            Site.getRewardCheckboxVal();
            Site.hideDonateBtn();
            Site.toggleSuccessShare();
            Site.removeMailList();
            Site.rewardSelect();
            Site.pwaRewardAction();
            Site.nextSection();
            Site.sharePrevNext();
            Site.pwatogglePost();
            Site.zeroDefaultInput();
            Site.errorInputFormWithIcon();
            Site.disclaimerCheckbox();
            Site.modalAutoClose();
            Site.carouselPwa();
            Site.iconOnImageChange();
            Site.changeWidthDropdown();
            Site.hideShowPassword();
            Site.searchBarOverlay();
            Site.toggleComponent();
            Site.contentActivateToggle();
            Site.todayDatePicker();
            Site.usrMenuDropdown();
            Site.activateHeader();
            Site.closeOverlayContent();
            Site.goToTopBtn();
            Site.tourTip();
            Site.placeholderDate();
            Site.createSameHeightCells();
            Site.modalToggle();
            Site.onlyNumberInput();
            Site.editDisabledInput();
            Site.validateNumber();
            Site.btnAjaxLoad();
            Site.pwaAjaxLoad();
            // Site.ajaxWithTimeout();
            Site.fbShareCounter();
            Site.chatWidget();
            Site.newSlider();
        },

        //4
        //Page: On almost all page
        // Function: to set min-height for each page (
        // Platform: desktop
        mainHeight: function() {
            var header      = $('.site-header').height(),
            footer      = $('.site-footer').height();
            $('.site-main').css('min-height', $(window).height() - header - footer);
            $('.site-entrance').css('min-height', $(window).height() - header - footer - 20);
        },

        //5
        // belum jelas dipake apa ga
        headerOpt: function () {
            var $overlay    = $('.overlay'),
            $trigger    = $('.option-trigger'),
            $parent     = $('.site-header'),
            $options    = $('.header-option');

            $trigger.click(function(e){
                $(this).toggleClass('active');
                $overlay.toggleClass('active');
                $options.toggleClass('active');
                $parent.toggleClass('active');
                $('body').toggleClass('no-scroll');
                e.preventDefault();
            });

            $overlay.click(function(){
                $(this).removeClass('active');
                $trigger.removeClass('active');
                $options.removeClass('active');
                $parent.removeClass('active');
                $('body').removeClass('no-scroll');
            });

            $(window).on('resize', function(){
                var win = $(this); //this = window
                if (win.width() >= 768) {
                    $('body').removeClass('no-scroll');
                }
                if ( win.width() < 768 && $('.site-header').hasClass('active') ) {
                    $('body').addClass('no-scroll');
                };
            });

            if($('.site-header--transparent').length) {
                $('.site-main').addClass('has-slider');
                $('.notif-area').addClass('has-slider');
            }
        },

        //7
        //Page: On several pages
        // Function: to create slider
        // Platform: desktop
        slider: function () {
            // belum jelas apa masi dipake di halaman home apa ga
            var $slider             = $('.home-slider');
            // var $projectSlide       = $('.home-project-slide');
            // var $partnerSlide       = $('.partner-slider');
            // var $howSlide           = $('.how-it-works');
            // var $testiSlider        = $('.testi-slider');
            // var $newPartnerGallery  = $('.partner-gallery');
            // var $publicCampaign     = $('.public-campaign-slider');
            // var $slickSlider        = $('.slick-slider');
            var $mainSlider         = $('.main-slider');
            var $projectList        = $('.project-list');
            var $zakatSlider        = $('.zakat-slider');
            var $carousel           = $('.carousel');
            // var $carouselPricing    = $('.carousel--pricing');

            if ( !$slider.length && !$zakatSlider.length && !$mainSlider.length
                && !$projectList.length && !$carousel.length) return;

            Modernizr.load({
                load    : assets._slick,
                complete: function () {

                    // home slider
                    // $slider.closest('.site-header').addClass('has-slider');

                    var carouselShow = $('.carousel').data('show');
                    var carouselDots = $('.carousel').data('dots');
                    var Params = $('.carousel').data('params');
                    var carouselParams = Params - 1;

                    if (carouselParams == 998){
                        carouselParams = false;
                    }

                    $carousel.slick({
                        slidesToShow: carouselShow,
                        // centerMode: true,
                        dots: carouselDots,
                        infinite: false,
                        initialSlide: carouselParams
                    });

                    if(!$('.notif-area').length) {
                        $slider.addClass('no-notif');
                    }

                    $zakatSlider.slick({
                        arrows: false,
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        autoplay: true,
                        autoplaySpeed: 2000,
                    });
                }
            });
        },

        //11
        // UNUSED FUNCTION
        // cloneTitle: function () {
        //     var $title      = $('.project-header'),
        //     newTitle    = '.project-header--top';

        //     $title.clone().appendTo(newTitle);
        // },

        //12
        // Page: On all page that contain youtube
        // Function: to resize video
        // Platform: desktop and PWA
        videoFluid: function () {
            // Find all YouTube videos
            var $allVideos = $('.iframe-video iframe'),
                // The element that is fluid width
                $fluidEl = $allVideos.parent();

            // Figure out and save aspect ratio for each video
            $allVideos.each(function() {
                $(this)
                .data('aspectRatio', this.height / this.width)

                    // and remove the hard coded width/height
                    .removeAttr('height')
                    .removeAttr('width');
            });

            // When the window is resized
            $(window).resize(function() {
                var newWidth = $fluidEl.width()+1;
                // Resize all videos according to their own aspect ratio
                $allVideos.each(function() {

                    var $el = $(this);

                    $el
                    .width(newWidth)
                    .height(newWidth * $el.data('aspectRatio'));

                });

            // Kick off one resize to fix all videos on page load
            }).resize();

            var $video = $('.project-detail__article'),
                videoItem = $video.find('iframe');

            $(videoItem).each(function() {
                $(this).wrap("<div class='video-embed'></div>");
            });
        },

        //13
        // Page: On campaign page
        // Function: to resize cover image
        // Platform: desktop
        coverProject: function () {
            var $cover          = $('.project-cover'),
            $coverImg       = $('.project-cover img'),
            coverWidth      = $cover.width();

            $cover.css('min-height', coverWidth * 9/16);

            $(window).resize(function() {

                $cover.css('min-height', coverWidth * 9/16);
            });

            $(window).on("orientationchange",function(){
                $cover.css('min-height', coverWidth * 9/16);
            });

            $coverImg.each(function() {
            // Calculate aspect ratio and store it in HTML data- attribute
            var aspectRatio = $(this).width()/$(this).height();
            var ratio       = 16/9;

            $(this).data("aspect-ratio", aspectRatio);

                // Conditional statement
                if(aspectRatio > ratio) {
                    // Image is landscape
                    $(this).css({
                        width: "auto",
                        height: "100%"
                    });
                } else if (aspectRatio < ratio) {
                    // Image is portrait
                    $(this).css({
                        width: "100%",
                        height: "auto"
                    });
                } else {
                    // Image is square
                    $(this).css({
                        width: "100%",
                        height: "auto"
                    });
                }
            });

        },

        //16
        // Page: On contribute page step navigation
        // Function: to styling step-nav
        // Platform desktop
        stepNav: function () {
            $('.contribute-step-nav .current').prevAll().addClass('passed');

            var $btnTrigger     = $('.step-nav-trigger'),
            $btnText        = $('.step-nav-trigger .btn-text'),
            $stepNav        = $('.step-nav');
            $stepNavLink    = $('.step-nav__item a');

            $btnTrigger.click(function(e) {
                e.preventDefault();
                e.stopPropagation();

                if($(this).hasClass('is-open')) {
                    $(this).removeClass('is-open');
                    $stepNav.removeClass('is-open');
                } else {
                    $(this).addClass('is-open');
                    $stepNav.addClass('is-open');
                }
            });

            $(document).click(function() {
                if($btnTrigger.hasClass('is-open')) {
                    $btnTrigger.removeClass('is-open');
                    $stepNav.removeClass('is-open');
                }
            });

            $stepNavLink.click(function() {
                var val = $(this).parent().attr('data-val');

                $stepNavLink.parent().removeClass('current');

                if($(this).parent().hasClass('current')) {
                    $btnText.text('');
                    $stepNavLink.parent().removeClass('current');
                } else {
                    $btnText.text(val);
                    $(this).parent().addClass('current');
                }
            });

            $('.step-nav__item').each(function() {
                if($(this).hasClass('current')) {
                    var val = $(this).attr('data-val');

                    $btnText.text(val);
                }
            });
        },

        //17
        // Page: on campaign page tab
        // Function: Toggle tab
        // Platform: desktop
        tabNav: function() {
            var $el             = $('.tab__item'),
            $elContent      = $('.tab__panel'),
            activeClass     = 'is-active';


            $el.first().addClass(activeClass);
            $elContent.first().addClass(activeClass);

            $('.tab__item > a').on('click', function (e) {
                e.preventDefault();

                $el.removeClass(activeClass);
                $elContent.removeClass(activeClass);
                $(this).parent().addClass(activeClass);
                $target = $(this).attr('href');
                $($target).addClass(activeClass);
            });

            $('.tab__report > a').unbind('click');
        },

        //18
        // Page: Toggle tab
        // Function: on campaign page tab
        // Platform: PWA
        tabNavWrapper: function () {
            var $wrapper        = $('.tab-nav-wrapper'),
            wrapperH        = $wrapper.outerHeight(true),
            $projectCol     = $('.tab-detail'),
            mywindow        = $(window),
            activeClass     = 'is-active';

            function handleCampaignPageTab(){
                if (mywindow.scrollTop() > wrapperTop) {
                    $wrapper.addClass('fixed');
                    $('.project-contributor__filter').addClass('fixed');
                    $('.project-contributor').css('padding-top', wrapperH);
                    $projectCol.addClass(activeClass).css('padding-top', wrapperH);
                }
                else {
                    $wrapper.removeClass('fixed');
                    $('.project-contributor__filter').removeClass('fixed');
                    $('.project-contributor').css('padding-top', '0');
                    $projectCol.removeClass(activeClass).css('padding-top', '0');
                }
            }

            if ( $wrapper.length ) {
                var wrapperTop      = $wrapper.offset().top;

                mywindow.on('scroll', handleCampaignPageTab);
            }
        },

        //20
        // Page: On all page that contains auto-num-input
        // Function: Auto thousand for input
        // Platform: desktop and PWA
        autoThousand: function() {
            if($('.auto-num')[0]){
                var $form       = $('.auto-num');
                var $inputValue = $('.auto-num-input');
                var minValue    = $inputValue.data('min');

                if ( !$inputValue.length ) return;

                Modernizr.load({
                    load    : assets._autoNum,
                    complete: function () {

                            // Create thousands separator value
                            $inputValue.autoNumeric({
                                digitGroupSeparator: '.',
                                decimalCharacter: ',',
                                allowDecimalPadding: false
                            });

                            // Get non-separator value
                            function getValue() {
                                var value = $inputValue.autoNumeric('get');
                                return value;
                            }

                            // Validate field with the non-separator value
                            $inputValue.on('keyup paste', function () {
                                var value = getValue();

                                $inputValue.data('value', value);
                            });

                            // Submit non-separator value
                            $form.on('submit', function () {
                                $inputValue.val($inputValue.autoNumeric('get'));
                            });
                    }
                });
            }
        },

        //21
        // Page: on page donation
        // Function: Choose reward flow
        // Platform: desktop
        chooseReward: function () {
            //input donasi
            var $input_target   = $('.input-target'),
            //jumlah donasi sesuai input
            $grand_target   = $('.input-target--grand span'),
            $inputList      = $('.input-trigger input'),
            $inputListOff   = $('.reward-list__item input[disabled="disabled"]'),
            $inputChecker   = $('.reward-list__item input'),
            $inputTrigger   = $('.reward-list__item'),
            $grandWrapper   = $('.form-action-wrapper'),
            $bottomLine     = $('.bottom-line'),
            $ammountList    = $('.reward-amount'),
            mywindow        = $(window),
            listVal         = $inputChecker.attr('data-input');

            //if ( !$inputList.length ) return;
            if ( !$input_target.length ) return;
            if ( !$grand_target.length ) return;

            Modernizr.load({
                load    : assets._autoNum,
                complete: function () {

                    $ammountList.each(function() {
                        //var ammount = $(this).closest('.input-trigger').children('input').attr('data-input');

                        //init autoNumeric di setiap reward amount text
                        $(this).autoNumeric({
                            digitGroupSeparator: '.',
                            decimalCharacter: ',',
                            allowDecimalPadding: false
                        });
                    });

                    //init autoNumeric di setiap text "total donasi"
                    $grand_target.autoNumeric('init', {
                        digitGroupSeparator: '.',
                        decimalCharacter: ',',
                        allowDecimalPadding: false
                    });

                    $inputListOff.parent().addClass('is-disabled');

                    //$inputChecker.parent().addClass('is-disabled');

                    if($inputChecker.hasClass('less')) {
                        $(this).parent().addClass('is-disabled');
                    } else {
                        $(this).parent().removeClass('is-disabled');
                    }

                    //user keyup or make change to inputan donasi
                    $input_target.bind("keyup paste", function() {
                        // var inputVal    = Math.floor($(this).val()),
                        var bottomTrigger   = $bottomLine.offset().top - mywindow.height() + 40,
                        winHeight       = $(window).innerHeight(),
                        val             = $(this).val(),
                        val             = val.replace(/\./g, ''),
                        yourVal         = parseInt(val),
                        listVal         = Math.floor($('.reward-list__item input').val());

                        //set total kontribusi teks sesuai jumlah donasi
                        // if( $(this).val() === '')
                        $grand_target.text( $(this).val() === '' ? '0' : $(this).val());

                        $grandWrapper.addClass('floated');

                        //keep total kontribusi element floated
                        mywindow.scroll(function () {
                            if( mywindow.scrollTop() > bottomTrigger ) {
                                $grandWrapper.removeClass('floated');
                                //$(this).addClass('oke');
                            } else {
                                $grandWrapper.addClass('floated');
                            }
                        });
                    });

                    $input_target.change(function(){
                        var dataInput       = $(this).val().replace(/\./g, '');

                        $grand_target.autoNumeric('set', dataInput);
                    });

                    //check apakah jumlah donasi lebih besar atau lebih kecil dibanding angka minDonasi untuk reward
                    function checkDonationAmount(rewardElement, inputElement){

                        var minDonationForReward = $(rewardElement).parent().find('.reward-amount').text()
                            minDonationValueForReward = minDonationForReward.replace(/\./g, ''),
                            donationAmount = inputElement.val() === '' ? 0 : inputElement.val().replace(/\./g, '');

                        if(parseInt(minDonationValueForReward) > parseInt(donationAmount)){
                            return true
                        }
                        return false
                    }

                    $inputChecker.change(function(){
                        $inputTrigger.removeClass('selected');

                        if(checkDonationAmount(this, $input_target)){

                            $input_target.autoNumeric('set', minDonationValueForReward);
                            $grand_target.autoNumeric('set', minDonationValueForReward);
                        };

                        if($(this).is( ":checked" )) {
                            $(this).parent().addClass('selected');
                        }else {
                            $(this).parent().removeClass('selected');
                        }
                    });

                    $grand_target.text($input_target.val());
                }
            });
        },

        //25
        // Page: On all page that contains [data-scroll-to]
        // Function: To scroll to clicked element
        // Platform: desktop
        scrollToElement: function () {
            var trigger = document.querySelectorAll('[data-scrollto]');

            if ( !trigger.length ) return;

            var scrollToDestination = function (e) {
                e.preventDefault();

                var data_target = this.getAttribute('data-scrollto'),
                target      = document.querySelector(data_target),
                $target     = $(target),
                $target_top = $target.offset().top;

                $('html, body').animate({
                    scrollTop: $target_top
                }, 10);
            };

            for (var i = trigger.length - 1; i >= 0; i--) {
                trigger[i].addEventListener('click', scrollToDestination, 'false');
            };
        },

        //26
        // Page: On all pages that contains notif-area
        // Function: to close notification
        // Platform: desktop and PWA
        notif: function () {
            var notif = $('.notif'),
            btnClose    = $('.notif-close'),
            $area       = $('.notif-area'),
            areaHeight  = $area.height() -40,
            $main       = $('.site-main'),
            mywindow    = $(window);

            btnClose.on('click', function(e){
                $(this).closest('.notif-area').slideUp( function () {
                    $(this).remove();
                });
                $(this).closest('.notif').slideUp( function () {
                    $(this).remove();
                });
                $(this).fadeOut(500);
                e.preventDefault();
            });

            if(!$area.length) return;
            var areaTop      = $area.offset().top;

            mywindow.scroll(function () {

                if(!$area.length) return;

                if (mywindow.scrollTop() > areaTop) {
                    $area.addClass('fixed');
                    // $main.css('padding-top', areaHeight);
                }
                else {
                    $area.removeClass('fixed');
                    // $main.css('padding-top', '0');
                }
            });
        },

        //28
        // Page: on all page that contains date-picker
        // Function: Datepicker
        // Platform: desktop
        datePicker: function () {
            var $picker = $('.date-picker');

            if ( !$picker.length ) return;

            Modernizr.load({
                load: assets._datepicker,
                complete: function() {
                    $picker.datepicker({
                        autoclose: true,
                        todayBtn: true,
                        todayHighlight: true
                    });
                }
            });
        },

        //31
        // Page: desktop-donation-step-2 and pwa-donation-step-2
        // Function: Custom radio button
        // Platform: desktop and PWA
        customRadio: function () {
            var $radio      = $('.cust-radio');

            $radio.each(function() {
                var listParent = $(this).parent();

                if($(this).is( ":checked" )) {
                    listParent.addClass('radio-check');
                } else {
                    if (!listParent.parent().hasClass('js-form-has-checked')){
                        listParent.removeClass('radio-check');
                    }
                }
            });

            $('.payment-opt').on('click', '.payment-opt__item', function(event) {
                $(this).find('input').prop('checked', true);
                $(this).siblings('.payment-opt__item').find('input').prop('checked', false);
                $(this).addClass('radio-check');
                $(this).siblings('.payment-opt__item').removeClass('radio-check');
                $(this).find('.payment-opt__item__desc').removeClass('hidden');
                $(this).siblings('.payment-opt__item').find('.payment-opt__item__desc').addClass('hidden');
                $(this).find('input').prop('checked', true);
            });

            var radioClick = function(el, item, desc) {
                $(el).on('click', item, function(event){
                    $(this).find('input').prop('checked', true);
                    $(this).siblings(item).find('input').prop('checked', false);
                    $(this).addClass('radio-check');
                    $(this).siblings(item).removeClass('radio-check');

                    var $inputWithText = $('.radio-circle__input--with-text');
                    if($inputWithText.prop('checked') == true){
                        $inputWithText.siblings('.radio-circle__desc').removeClass('hidden');
                    }else{
                        $inputWithText.siblings('.radio-circle__desc').addClass('hidden');
                    }
                })
            }
            $('.radio-circle').each(function() {
                radioClick('.radio-circle', '.radio-circle__item');
            });

            radioClick('.payment-opt', '.payment-opt__item', '.payment-opt__item__desc');
        },

        //32
        // Page: reward
        // Function: pilih kota saat memilih reward
        // Platform: desktop
        chosen: function () {
            var $select = $('.chosen-select');
            var $reward = $('#addReward');

            if(!$select.length && !$reward.length) return;

            Modernizr.load({
                load        : assets._chosen,
                complete    : function () {
                    $select.chosen();
                }
            });
        },

        //35
        // Page: Campaign page
        // Function: Toggle to see more detail on update tab campaign page
        // Platform: desktop and PWA
        togglePost: function () {
            var $trigger    = $('.btn-detail-post');

            $trigger.click(function(e) {
                e.preventDefault();

                if($(this).hasClass('is-active')) {
                    $(this).removeClass('is-active').next().removeClass('is-active');
                } else {
                    $(this).addClass('is-active').next().addClass('is-active');
                }
            });
        },

        //36
        // Page: On all page that contains redactor
        // Function: redactor (text editor)
        // Platform: desktop and PWA
        textEditor: function () {
            var $editor     = $('.redactor');
            var $redactor   = $('#Projects_description');

            // $editor.each(function() {
            //     var dataUpload = $(this).attr('data-upload');
            // });

            if(!$editor.length && !$redactor.length) return;

            Modernizr.load({
                load        : assets._redactor,
                complete: function () {
                    var dataUpload = $editor.data('upload');

                    var redactorUpload = $('.redactor').attr('data-upload');
                    var redactorButton = $('.redactor').data('buttons');
                    var redactorPlugin = $('.redactor').data('plugins');
                    // var redactorJson = $('.redactor').attr('data-json');

                    $editor.redactor({
                        focus: false,
                        plugins: redactorPlugin,
                        imageUpload: redactorUpload,
                        buttons: redactorButton,
                        callbacks: {
                            imageUploadError: function(json)
                            {
                                alert(json.error);
                                alert(json.anothermessage);
                            }
                        }
                    });

                    var title = $('.redactor-tips').data('tips-title');
                    var tips = $('.redactor-tips').data('tips');
                    var content = '<b>'+title+'</b><ul class="no-padding">'+tips+'</ul>';
                    $('.redactor-tips .redactor-toolbar').append('<li class="redactor-toolbar__tips">'+content+'</li>');

                    $(document).scroll(function(event) {
                        var height = $('.redactor-editor').height();
                        var position = $('.redactor-toolbar').position().top;
                        var count = height*0.4;

                        if (position > count) {
                            $('.redactor-toolbar__tips').hide();
                        }

                        else if (position < count) {
                            $('.redactor-toolbar__tips').show();
                        }
                    });

                    $(document).on('click', '.redactor-editor', function(event) {
                        $('.redactor-editor').addClass('redactor-editor--white');
                    });

                    $(document).on('keyup', '.redactor-editor', function(event) {
                        $('.redactor-editor').addClass('redactor-editor--white');
                    });

                    $(document).on('click', '#redactor-modal-box', function(event) {
                        $('.redactor-editor').addClass('redactor-editor--white');
                    });

                    $('html').click(function(event) {
                        if(!$(event.target).hasClass('redactor-editor') && !$('.redactor').val())
                        {
                            $('.redactor-editor').removeClass('redactor-editor--white');
                        }
                    });
                }
            });
        },

        //38
        // Page: on all page that contains form-info--counter
        // Function: to count character on input
        // Platform: desktop and PWA
        maxCharInput: function () {
            var $counter    = $('.form-info--counter');

            $counter.each(function(){
                var $maxChar    = $(this).find('.max-char');
                var $input      = $(this).closest('.form__row').find('.input-max-char');

                var textMax     = $input.attr('data-char');
                var maxLength   = textMax;

                var $remainChar = $input.siblings('.form-info').find('.remain-char');
                var length = $input.val().length;

                $maxChar.text(maxLength);

                $remainChar.text(length);

                $input.keyup(function(e) {

                if(!$input.length) return;

                    var length = $(this).val().length;
                    var vlength = maxLength - length;

                    $remainChar.text(length);

                    if (e.which < 0x20) {
                        return;
                    }
                    //check if maximum length
                    if (this.value.length == maxLength) {
                    e.preventDefault();
                    } else if (this.value.length > maxLength) {
                        // Maximum exceeded
                        this.value = this.value.substring(0, maxLength);
                    }
                });
            });
        },

        //39
        // Page: all pages that contains form-input--file
        // Function: to input file image
        // Platform: desktop and PWA
        customPhotoUpload: function () {
            var $inputFile      = $('.form-input--file');
            // var $cover          = $('.cover-campaign--img');

            $inputFile.on('change', function () {
                var $cover      = $(this).siblings('label').find('.cover-campaign--img');
                var $ktp        = $(this).siblings('#ktp');
                var $avatar     = $(this).siblings('#profpict');

                if (typeof (FileReader) != "undefined") {

                    var image_holder = $("#image-holder");
                    // image_holder.empty();

                    var reader = new FileReader();
                    reader.onload = function (e) {
                        // $("<img />", {
                        //     "src": e.target.result,
                        //     "class": "thumb-image"
                        // }).appendTo(image_holder);

            var bg = e.target.result;
                        $cover.css('background-image', 'url('+bg+')');
                        $ktp.text(bg);
                        $avatar.text(bg);
                    }
                    // image_holder.show();
                    reader.readAsDataURL($(this)[0].files[0]);
                } else {
                    alert("This browser does not support FileReader.");
                }
            });
        },

        //40
        // Page: Dashboard page
        // Function: User panel navigation
        // Platform: desktop
        dashboardNav: function () {
            var $btnTrigger     = $('.user-panel__nav .btn-trigger');
            // var $navOverlay     = $('.user-panel__nav:before');

            var $subNav         = $('.user-panel__nav .sub-nav');
            var $subNavItem     = $('.user-panel__nav .sub-nav li.current');
            var $subNavTrigger  = $subNav.prev('a');

            $btnTrigger.on('click', function(e) {
                e.preventDefault();
                e.stopPropagation();

                $(this).addClass('active').next('ul').fadeIn(250);
                $('body').addClass('no-scroll');

                $(this).parent().addClass('is-show');
            });

            $(document).on('click', function() {
                if($btnTrigger.hasClass('active')) {
                    $btnTrigger.removeClass('active').next('ul').fadeOut(250);
                    $('body').removeClass('no-scroll');
                    $btnTrigger.parent().removeClass('is-show')
                }
            });

            $subNavTrigger.on('click', function(e) {
                e.preventDefault();
                e.stopPropagation();

                if($(this).hasClass('is-active')) {
                    $(this).removeClass('is-active').next().removeClass('is-show');
                    $(this).find('span').addClass('icon-chevron-right');
                    $(this).find('span').removeClass('icon-keyboard-arrow-down');
                } else {
                    $(this).addClass('is-active').next().addClass('is-show');
                    $(this).find('span').addClass('icon-keyboard-arrow-down');
                    $(this).find('span').removeClass('icon-chevron-right');
                }
            });
                $subNavItem.closest('.sub-nav').addClass('is-show').prev().addClass('is-active');
        },

        //41
        // Page: on dashboard page, menu donation
        // Function: Data table
        // Platform: desktop
        dataTable: function () {
            var $table         = $('.data-table__el');
            var $tableRes      = $('.dataTables-example'),
                $tableDashboard = $('.dataTables__dashboard');

            if(!$table.length && !$tableRes.length && !$tableDashboard.length) return;

            Modernizr.load({
                load    : [assets._dataTableInspinia, assets._dataTableRes],
                complete: function () {
                    $table.DataTable({
                        searching: true,
                        language: {
                            searchPlaceholder: "Cari"
                        }
                    });

                    $('.dataTables-example').DataTable({
                        responsive: true,
                        searching: false
                    });

                    $tableDashboard.DataTable({
                        responsive: true,
                        searching: false,
                        lengthChange: false,
                        pageLength: 6
                    });
                }
            });
        },

        //43
        // Page: campaign page, tab fundraiser
        // Function: to show more fundraiser, just hide elements, starts from fifth item, no-ajax
        // Page: desktop
        fundraiserShowmore: function() {
            var $fundraiser         = $('.fundraiser');
            // var $fundraiserList     = $('.fundraiser__list');
            // var $fundraiserOwner    = $('.fundraiser__list li:gt(4)');
            var $buttonMore         = $('.btn-more-fundraiser');
            var $buttonLess         = $('.btn-less-fundraiser');

            // $fundraiserOwner.hide();
            $('.project-fundraiser li:gt(4)').hide();

            $('#funders').on('click','.btn-more-fundraiser', function(event) {
                $(this).removeAttr('href');
                var $frHidden  = $('.project-fundraiser li:hidden:lt(4)');
                $frHidden.show();
                var frAmount   = $('.project-fundraiser li:hidden').length;

                if (!frAmount) {
                    $(this).find('.text--more').text('show less');
                    $(this).removeClass('btn-more-fundraiser');
                    $(this).addClass('btn-less-fundraiser');
                }
            });

            $('.fundraiser').on('click','.btn-less-fundraiser', function(event) {
                // $fundraiserOwner.hide();
                $(this).attr('href', '#fundraiser');
                $(this).children('span').text('show more...');
                $(this).removeClass('btn-less-fundraiser');
                $(this).addClass('btn-more-fundraiser');
            });

            $('#funders').on('click','.btn-less-fundraiser', function(event) {
                $('.project-fundraiser li:gt(4)').hide();
                $(this).attr('href', '#funders');
                $(this).find('.text--more').text('show more');
                $(this).removeClass('btn-less-fundraiser');
                $(this).addClass('btn-more-fundraiser');
            });
        },

        //45 //fungsi ini kalo bisa dibikin api
        // Page: on all pages that contains targetImg
        // Function: crop image
        // Platform: desktop
        initCropper: function() {
            var $targetImg     = $('.targetImg');

            if(!$targetImg.length) return;

            var width = $('#img-container').width();
            var height = $('#img-container').height();

            Modernizr.load({
                load    : assets._cropper,
                //if asset cropper load success
                complete: function () {
                    'use strict';
                    var Cropper = window.Cropper;
                    var console = window.console || { log: function () {} };
                    var container = document.querySelector('.img-container');
                    var image = container.getElementsByTagName('img').item(0);

                    var actions = document.getElementById('actions');
                    var dataX = document.getElementById('dataX');
                    var dataY = document.getElementById('dataY');
                    var dataHeight = document.getElementById('dataHeight');
                    var dataWidth = document.getElementById('dataWidth');
                    var dataRotate = document.getElementById('dataRotate');
                    var dataScaleX = document.getElementById('dataScaleX');
                    var dataScaleY = document.getElementById('dataScaleY');
                    var options = {
                        viewMode: 0,
                        aspectRatio: 664 / 357,
                        minCropBoxHeight: height,
                        minCanvasHeight: height,
                        minContainerHeight: height,
                        minCropBoxWidth: width,
                        minCanvasWidth: width,
                        minContainerWidth: width,
                        modal: 0,
                        preview: '.img-preview',
                        build: function () {

                        },
                        built: function () {
                        },
                        cropstart: function (data) {
                        },
                        cropmove: function (data) {
                        },
                        cropend: function (data) {
                        },
                        crop: function (data) {

                        autoCrop: 1;
                        },
                        zoom: function (data) {

                        },
                        movable: 1,
                        center: 0,
                        cropBoxResizable: 0,
                        cropBoxMovable: 0,
                        dragMode: 'move'
                    };
                    var cropper = new Cropper(image, options);

                    function isUndefined(obj) {
                        return typeof obj === 'undefined';
                    }

                    function preventDefault(e) {
                        if (e) {
                            if (e.preventDefault) {
                                e.preventDefault();
                            } else {
                                e.returnValue = false;
                            }
                        }
                    }

                    // Buttons
                    if (!document.createElement('canvas').getContext) {
                        $('button[data-method="getCroppedCanvas"]').prop('disabled', true);
                    }

                    if (typeof document.createElement('cropper').style.transition === 'undefined') {
                        $('button[data-method="rotate"]').prop('disabled', true);
                        $('button[data-method="scale"]').prop('disabled', true);
                    }

                    // Methods
                    actions.querySelector('.docs-buttons').onclick = function (event) {
                        var e = event || window.event;
                        var target = e.target || e.srcElement;
                        var result;
                        var input;
                        var data;

                        if (!cropper) {
                            return;
                        }

                        while (target !== this) {
                            if (target.getAttribute('data-method')) {
                                break;
                            }
                            target = target.parentNode;
                        }

                        if (target === this || target.disabled || target.className.indexOf('disabled') > -1) {
                            return;
                        }

                        data = {
                            method: target.getAttribute('data-method'),
                            target: target.getAttribute('data-target'),
                            option: target.getAttribute('data-option'),
                            secondOption: target.getAttribute('data-second-option')
                        };

                        if (data.method) {
                            if (typeof data.target !== 'undefined') {
                                input = document.querySelector(data.target);

                                if (!target.hasAttribute('data-option') && data.target && input) {
                                    try {
                                        data.option = JSON.parse(input.value);
                                    } catch (e) {

                                    }
                                }
                            }

                            if (data.method === 'getCroppedCanvas') {
                                data.option = JSON.parse(data.option);
                            }

                            result = cropper[data.method](data.option, data.secondOption);

                            switch (data.method) {
                                case 'scaleX':
                                case 'scaleY':
                                target.setAttribute('data-option', -data.option);
                                break;

                                case 'getCroppedCanvas':
                                if (result) {

                                    // Bootstrap's Modal
                                    $('.targetImg').show();
                                    $('.targetImg').html(result);
                                    $('.img-container').removeClass('show');
                                    $('.img-container').addClass('hidden');
                                    var target = document.querySelector(".targetImg canvas").toDataURL();
                                    $('#image64').text(target);
                                    $('.btn-action-edit').toggleClass('hidden show');
                                    $('#cropCropper').toggleClass('hidden show');
                                    $('.docs-buttons .btn--pink').removeClass('hidden');
                                    $('.docs-buttons .btn--pink').addClass('show');
                                    $('#image64').siblings('.error-text').remove();
                                }

                                break;

                                case 'destroy':
                                cropper = null;
                                break;
                            }

                            if (typeof result === 'object' && result !== cropper && input) {
                                try {
                                    input.value = JSON.stringify(result);
                                } catch (e) {

                                }
                            }
                        }
                    };

                    document.body.onkeydown = function (event) {
                        var e = event || window.event;

                        if (!cropper.ready || this.scrollTop > 300 || cropper.disabled) {
                            return;
                        }

                        switch (e.keyCode) {
                            case 37:
                            preventDefault(e);
                            cropper.move(-1, 0);
                            break;

                            case 38:
                            preventDefault(e);
                            cropper.move(0, -1);
                            break;

                            case 39:
                            preventDefault(e);
                            cropper.move(1, 0);
                            break;

                            case 40:
                            preventDefault(e);
                            cropper.move(0, 1);
                            break;
                        }
                    };

                    // Import image
                    var inputImage = document.getElementById('inputImage');
                    var URL = window.URL || window.webkitURL;
                    var blobURL;

                    if (URL) {
                        inputImage.onchange = function () {
                            var files = this.files;
                            var file;

                            if (cropper && files && files.length) {
                                //mengaktifkan cropper kembali
                                cropper.enable();
                                file = files[0];

                                if (/^image\/\w+/.test(file.type)) {
                                    blobURL = URL.createObjectURL(file);
                                    cropper.reset().replace(blobURL);
                                    inputImage.value = null;
                                    $('.targetImg').hide();
                                    $('#img-container').hide();
                                    $('.img-container').removeClass('hidden');
                                    $('.img-container').addClass('show');
                                    $('.btn-action-edit').removeClass('hidden');
                                    $('.btn-action-edit').addClass('show');
                                    $('#cropCropper').removeClass('hidden');
                                    $('#cropCropper').addClass('show');
                                    var info = $('.docs-buttons').attr('data-info');
                                    $('.docs-buttons .btn--pink').after('<div class="info">'+ info +'</div>');
                                    $('.docs-buttons .btn--pink').toggleClass('hidden show');
                                } else {
                                    window.alert('Please choose an image file.');
                                }
                            }
                        };
                    } else {
                        inputImage.disabled = true;
                        inputImage.parentNode.className += ' disabled';
                    }

                    $('#cropCropper').on('click', function(event) {
                        $('.info').remove();
                        //menonaktifkan cropper setelah proses crop selesai
                        cropper.disable();
                    });
                }
                //asset cropper load end

            })

            $('#img-container').on('click', '.label-trigger', function(event) {
                var size = $(document).width();
                if (size < 786) {
                    $('#inputImage').click();
                };
            });


            $('.cropper-move').on('click', function(event) {
                $('.cropper-view-box img').css("margin-left","auto");
            });
        },

        //46
        // Page: dashboard page, upload KTP/ID
        // Function: crop image
        // Platform: desktop
        initCropper2: function() {
            var $targetImg     = $('.targetImg2');

            if(!$targetImg.length) return;

            var width = $('#img-container2').width();
            var height = $('#img-container2').height();

            Modernizr.load({
                load    : assets._cropper,
                complete: function () {
                    'use strict';
                    var Cropper = window.Cropper;
                    var console = window.console || { log: function () {} };
                    var container = document.querySelector('.img-container2');
                    var image = container.getElementsByTagName('img').item(0);
                    // var download = document.getElementById('download');
                    var actions = document.getElementById('actions2');
                    var dataX = document.getElementById('dataX');
                    var dataY = document.getElementById('dataY');
                    var dataHeight = document.getElementById('dataHeight');
                    var dataWidth = document.getElementById('dataWidth');
                    var dataRotate = document.getElementById('dataRotate');
                    var dataScaleX = document.getElementById('dataScaleX');
                    var dataScaleY = document.getElementById('dataScaleY');
                    var options = {
                        viewMode: 1,
                        aspectRatio: 560 / 550,
                        minCropBoxHeight: height,
                        minCanvasHeight: height,
                        minContainerHeight: height,
                        minCropBoxWidth: width,
                        minCanvasWidth: width,
                        minContainerWidth: width,
                        modal: 0,
                        preview: '.img-preview2',
                        build: function () {
                          // console.log('build');
                        },
                        built: function () {
                          // console.log('built');
                        },
                        cropstart: function (data) {
                          // console.log('cropstart', data.action);
                        },
                        cropmove: function (data) {
                          // console.log('cropmove', data.action);
                        },
                        cropend: function (data) {
                          // console.log('cropend', data.action);
                        },
                        crop: function (data) {
                            autoCrop: 1;
                        },
                        zoom: function (data) {
                          // console.log('zoom', data.ratio);
                        },
                        movable: 1,
                        center: 0,
                        cropBoxResizable: 0,
                        cropBoxMovable: 0,
                        dragMode: 'move'
                    };
                    var cropper = new Cropper(image, options);

                    function isUndefined(obj) {
                        return typeof obj === 'undefined';
                    }

                    function preventDefault(e) {
                        if (e) {
                            if (e.preventDefault) {
                                e.preventDefault();
                            } else {
                                e.returnValue = false;
                            }
                        }
                    }

                    // Buttons
                    if (!document.createElement('canvas').getContext) {
                        $('button[data-method="getCroppedCanvas"]').prop('disabled', true);
                    }

                    if (typeof document.createElement('cropper').style.transition === 'undefined') {
                        $('button[data-method="rotate"]').prop('disabled', true);
                        $('button[data-method="scale"]').prop('disabled', true);
                    }

                    // Methods
                    actions.querySelector('.docs-buttons2').onclick = function (event) {
                        var e = event || window.event;
                        var target = e.target || e.srcElement;
                        var result;
                        var input;
                        var data;

                        if (!cropper) {
                            return;
                        }

                        while (target !== this) {
                            if (target.getAttribute('data-method')) {
                                break;
                            }

                            target = target.parentNode;
                        }

                        if (target === this || target.disabled || target.className.indexOf('disabled') > -1) {
                            return;
                        }

                        data = {
                            method: target.getAttribute('data-method'),
                            target: target.getAttribute('data-target'),
                            option: target.getAttribute('data-option'),
                            secondOption: target.getAttribute('data-second-option')
                        };

                        if (data.method) {
                            if (typeof data.target !== 'undefined') {
                                input = document.querySelector(data.target);

                                if (!target.hasAttribute('data-option') && data.target && input) {
                                    try {
                                    data.option = JSON.parse(input.value);
                                    } catch (e) {

                                    }
                                }
                            }

                            if (data.method === 'getCroppedCanvas') {
                                data.option = JSON.parse(data.option);
                            }

                            result = cropper[data.method](data.option, data.secondOption);

                            switch (data.method) {
                                case 'scaleX':
                                case 'scaleY':
                                target.setAttribute('data-option', -data.option);
                                break;

                                case 'getCroppedCanvas':
                                if (result) {
                                    // Bootstrap's Modal
                                    $('.targetImg2').show();
                                    $('.targetImg2').html(result);
                                    $('.img-container2').removeClass('show');
                                    $('.img-container2').addClass('hidden');
                                    var target = document.querySelector(".targetImg2 canvas").toDataURL();
                                    $('#image642').text(target);
                                    $('.btn-action-edit2').toggleClass('hidden show');
                                    $('#cropCropper2').toggleClass('hidden show');
                                    $('.docs-buttons2 .btn--pink').removeClass('hidden');
                                    $('.docs-buttons2 .btn--pink').addClass('show');
                                    $('#image642').siblings('.error-text').remove();
                                }

                                break;

                                case 'destroy':
                                cropper = null;
                                break;
                            }

                            if (typeof result === 'object' && result !== cropper && input) {
                                try {
                                  input.value = JSON.stringify(result);
                                } catch (e) {

                                }
                            }
                        }
                    };

                    document.body.onkeydown = function (event) {
                        var e = event || window.event;

                        if (!cropper || this.scrollTop > 300) {
                            return;
                        }

                        switch (e.keyCode) {
                            case 37:
                            preventDefault(e);
                            cropper.move(-1, 0);
                            break;

                            case 38:
                            preventDefault(e);
                            cropper.move(0, -1);
                            break;

                            case 39:
                            preventDefault(e);
                            cropper.move(1, 0);
                            break;

                            case 40:
                            preventDefault(e);
                            cropper.move(0, 1);
                            break;
                        }
                    };

                    // Import image
                    var inputImage = document.getElementById('inputImage2');
                    var URL = window.URL || window.webkitURL;
                    var blobURL;

                    if (URL) {
                        inputImage.onchange = function () {
                            var files = this.files;
                            var file;

                            if (cropper && files && files.length) {
                                file = files[0];

                                if (/^image\/\w+/.test(file.type)) {
                                    blobURL = URL.createObjectURL(file);
                                    cropper.reset().replace(blobURL);
                                    inputImage.value = null;
                                    $('.targetImg2').hide();
                                    $('#img-container2').hide();
                                    $('.img-container2').removeClass('hidden');
                                    $('.img-container2').addClass('show');
                                    $('.btn-action-edit2').removeClass('hidden');
                                    $('.btn-action-edit2').addClass('show');
                                    $('#cropCropper2').removeClass('hidden');
                                    $('#cropCropper2').addClass('show');
                                    var info = $('.docs-buttons2').attr('data-info');
                                    $('.docs-buttons2 .btn--pink').after('<div class="info">'+ info +'</div>');
                                } else {
                                window.alert('Please choose an image file.');
                                }
                            }
                        };
                    } else {
                        inputImage.disabled = true;
                        inputImage.parentNode.className += ' disabled';
                    }
                }
            })

            $('#img-container2').on('click', '.label-trigger2', function(event) {
                var size = $(document).width();
                if (size < 786) {
                    $('#inputImage2').click();
                };
            });

            $('#cropCropper2').on('click', function(event) {
                $('.info').remove();
            });

            $('.cropper-move').on('click', function(event) {
                $('.cropper-view-box img').css("margin-left","auto");
            });
        },

        //47
        // Page: dashboard page, upload foto verifikasi
        // Function: crop image
        // Platform: desktop
        initCropper3: function() {
            var $targetImg     = $('.targetImg3');

            if(!$targetImg.length) return;

            var width = $('#img-container3').width();
            var height = $('#img-container3').height();

            Modernizr.load({
                load    : assets._cropper,
                complete: function () {
                    'use strict';
                    var Cropper = window.Cropper;
                    var console = window.console || { log: function () {} };
                    var container = document.querySelector('.img-container3');
                    var image = container.getElementsByTagName('img').item(0);
                      // var download = document.getElementById('download');
                      var actions = document.getElementById('actions3');
                      var dataX = document.getElementById('dataX');
                      var dataY = document.getElementById('dataY');
                      var dataHeight = document.getElementById('dataHeight');
                      var dataWidth = document.getElementById('dataWidth');
                      var dataRotate = document.getElementById('dataRotate');
                      var dataScaleX = document.getElementById('dataScaleX');
                      var dataScaleY = document.getElementById('dataScaleY');
                      var options = {
                        viewMode: 1,
                        aspectRatio: 560 / 350,
                            // minCropBoxHeight: 357,
                            minCropBoxHeight: height,
                            minCanvasHeight: height,
                            minContainerHeight: height,
                            minCropBoxWidth: width,
                            minCanvasWidth: width,
                            minContainerWidth: width,
                            modal: 0,
                            preview: '.img-preview3',
                            build: function () {
                              // console.log('build');
                          },
                          built: function () {
                              // console.log('built');
                          },
                          cropstart: function (data) {
                              // console.log('cropstart', data.action);
                          },
                          cropmove: function (data) {
                              // console.log('cropmove', data.action);
                          },
                          cropend: function (data) {
                          },
                          crop: function (data) {

                              autoCrop: 1;
                          },
                          zoom: function (data) {
                              // console.log('zoom', data.ratio);
                          },
                          movable: 1,
                          center: 0,
                          cropBoxResizable: 0,
                          cropBoxMovable: 0,
                          dragMode: 'move'
                      };
                      var cropper = new Cropper(image, options);

                      function isUndefined(obj) {
                        return typeof obj === 'undefined';
                    }

                    function preventDefault(e) {
                        if (e) {
                          if (e.preventDefault) {
                            e.preventDefault();
                        } else {
                            e.returnValue = false;
                        }
                    }
                }

                      // Buttons
                      if (!document.createElement('canvas').getContext) {
                        $('button[data-method="getCroppedCanvas"]').prop('disabled', true);
                    }

                    if (typeof document.createElement('cropper').style.transition === 'undefined') {
                        $('button[data-method="rotate"]').prop('disabled', true);
                        $('button[data-method="scale"]').prop('disabled', true);
                    }

                        // Methods
                        actions.querySelector('.docs-buttons3').onclick = function (event) {
                            var e = event || window.event;
                            var target = e.target || e.srcElement;
                            var result;
                            var input;
                            var data;

                            if (!cropper) {
                              return;
                          }

                          while (target !== this) {
                              if (target.getAttribute('data-method')) {
                                break;
                            }

                            target = target.parentNode;
                        }

                        if (target === this || target.disabled || target.className.indexOf('disabled') > -1) {
                          return;
                      }

                      data = {
                          method: target.getAttribute('data-method'),
                          target: target.getAttribute('data-target'),
                          option: target.getAttribute('data-option'),
                          secondOption: target.getAttribute('data-second-option')
                      };

                      if (data.method) {
                          if (typeof data.target !== 'undefined') {
                            input = document.querySelector(data.target);

                            if (!target.hasAttribute('data-option') && data.target && input) {
                              try {
                                data.option = JSON.parse(input.value);
                            } catch (e) {
                            }
                        }
                    }

                    if (data.method === 'getCroppedCanvas') {
                        data.option = JSON.parse(data.option);
                    }

                    result = cropper[data.method](data.option, data.secondOption);

                    switch (data.method) {
                        case 'scaleX':
                        case 'scaleY':
                        target.setAttribute('data-option', -data.option);
                        break;

                        case 'getCroppedCanvas':
                        if (result) {

                                // Bootstrap's Modal
                                $('.targetImg3').show();
                                $('.targetImg3').html(result);
                                $('.img-container3').removeClass('show');
                                $('.img-container3').addClass('hidden');
                                var target = document.querySelector(".targetImg3 canvas").toDataURL();
                                $('#image643').text(target);
                                $('.btn-action-edit3').toggleClass('hidden show');
                                $('#cropCropper3').toggleClass('hidden show');
                                $('.docs-buttons3 .btn--pink').removeClass('hidden');
                                $('.docs-buttons3 .btn--pink').addClass('show');
                                $('#image643').siblings('.error-text').remove();
                            }

                            break;

                            case 'destroy':
                            cropper = null;
                            break;
                        }

                        if (typeof result === 'object' && result !== cropper && input) {
                            try {
                              input.value = JSON.stringify(result);
                          } catch (e) {
                          }
                      }
                  }
              };

              document.body.onkeydown = function (event) {
                var e = event || window.event;

                if (!cropper || this.scrollTop > 300) {
                  return;
              }

              switch (e.keyCode) {
                  case 37:
                  preventDefault(e);
                  cropper.move(-1, 0);
                  break;

                  case 38:
                  preventDefault(e);
                  cropper.move(0, -1);
                  break;

                  case 39:
                  preventDefault(e);
                  cropper.move(1, 0);
                  break;

                  case 40:
                  preventDefault(e);
                  cropper.move(0, 1);
                  break;
              }
            };

                      // Import image
                var inputImage = document.getElementById('inputImage3');
                var URL = window.URL || window.webkitURL;
                var blobURL;

                if (URL) {
                    inputImage.onchange = function () {
                    var files = this.files;
                    var file;

                        if (cropper && files && files.length) {
                        file = files[0];

                            if (/^image\/\w+/.test(file.type)) {
                              blobURL = URL.createObjectURL(file);
                              cropper.reset().replace(blobURL);
                              inputImage.value = null;
                              $('.targetImg3').hide();
                              $('#img-container3').hide();
                              $('.img-container3').removeClass('hidden');
                              $('.img-container3').addClass('show');
                              $('.btn-action-edit3').removeClass('hidden');
                              $('.btn-action-edit3').addClass('show');
                              $('#cropCropper3').removeClass('hidden');
                              $('#cropCropper3').addClass('show');
                              var info = $('.docs-buttons3').attr('data-info');
                              $('.docs-buttons3 .btn--pink').after('<div class="info">'+ info +'</div>');

                            } else {
                              window.alert('Please choose an image file.');
                            }
                        }
                    };
                } else {
                inputImage.disabled = true;
                inputImage.parentNode.className += ' disabled';
                }
                    }
                })

            $('#img-container3').on('click', '.label-trigger3', function(event) {
                var size = $(document).width();
                if (size < 786) {
                    $('#inputImage3').click();
                };
            });

            $('#cropCropper3').on('click', function(event) {
                $('.info').remove();
            });

            $('.cropper-move').on('click', function(event) {
                $('.cropper-view-box img').css("margin-left","auto");
            });
        },

        //48
        // Page: halaman partner
        // Function: to show more campaign on partner page
        // Platform: desktop
        // Nb: penamaan button fundraiser__btn perlu diperbaiki, karena fungsi ini tidak ada hubungannya dengan fundraiser
        loadMoreCampaignsOnPartnerPage: function() {
            if(!$('#template').length) return;

            var $btn        = $('.fundraiser__btn');
            var $page       = $(window);
            var source      = $('#template').html();
            var template    = Handlebars.compile(source);

            $('#fundraiser').on('click', '.fundraiser__btn' , function(event) {
                $('body').append('<div class="first-loader"><img src="/elements/images/spin.svg"></div>');
                var url = $(this).attr('data-load');

                $.getJSON(url, function(json, textStatus) {
                    if (json.next === "") {
                        $('.fundraiser__btn').remove();
                    };

                    var targetData  = template(json);
                    $('#fundraiser .flex-container').append(targetData);
                    $('.fundraiser__btn').attr('data-load', json.next);
                    $('.first-loader').remove();
                });
            });
        },

        //51
        // Page: on campaign page, section donatur
        // Function: to show more donors based on time dan amount
        // Platform: desktop
        loadDonatur: function() {
            if(!$('#template').length) return;

            var source      = $('#template').html();
            var template    = Handlebars.compile(source);

            $('#project-donatur__dana').on('click', '#btn-load-donatur--dana' , function(event) {
                var url = $(this).attr('data-load');
                $('#project-donatur__dana .project-donatur').append('<img class="loadball" src="elements/images/loadball.gif">');
                $(this).hide();

                $.getJSON(url, function(json, textStatus) {
                    if (json.next === "") {
                        $('#btn-load-donatur--dana').remove();
                    };

                    var targetData  = template(json);
                    $('#project-donatur__dana .project-donatur').append(targetData);
                    $('#btn-load-donatur--dana').attr('data-load', json.next);
                    $('.loadball').remove();
                    $('#btn-load-donatur--dana').show();
                });
            });

            $('#project-donatur__waktu').on('click', '#btn-load-donatur--waktu' , function(event) {
                var url = $(this).attr('data-load');
                $('#project-donatur__waktu .project-donatur').append('<img class="loadball" src="elements/images/loadball.gif">');
                $(this).hide();

                $.getJSON(url, function(json, textStatus) {
                    if (json.next === "") {
                        $('#btn-load-donatur--waktu').remove();
                    };

                    var targetData  = template(json);
                    $('#project-donatur__waktu .project-donatur').append(targetData);
                    $('#btn-load-donatur--waktu').attr('data-load', json.next);
                    $('.loadball').remove();
                    $('#btn-load-donatur--waktu').show();
                });
            });
        },

        //53
        // Page: homepage desktop and PWA
        // Function: to create auto typing words
        // Platform: desktop and PWA
        initTyper: function() {
            // var typer= $('#typed'),
            //     lang = $(typer).data('lang');

            if(!$('#typed').length && !$('#typedPwa').length) return;


                var typer = $('#typed');
                var strings = ["Orang tersayang", "Biaya pengobatan", "Menolong sesama", "Bikin karya", "Bangun Indonesia"];

            Modernizr.load({
                load    : assets._typer,
                complete: function () {
                    $(typer).typed({
                        strings: strings,
                        contentType: 'text',
                        typeSpeed: 90,
                        backSpeed: 60,
                        backDelay: 2000,
                        loop: true,
                        loopCount: false,
                        showCursor: false,
                        stopNum : 2,
                        cursorChar: "|"
                    });
                }
            });
        },

        //55
        // Page: dashboard page, menu campaign saya
        // Function: to load more campaign card
        // Platform: desktop
        dashboardCampaignMore: function() {
            if(!$('#template').length) return;

            Handlebars.registerHelper('if_eq', function(a, b, opts) {
                if(a == b) // Or === depending on your needs
                    return opts.fn(this);
                else
                    return opts.inverse(this);
            });

            var $btn        = $('.js-request-card');
            var $page       = $(window);
            var source      = $('#template').html();
            var template    = Handlebars.compile(source);

            $btn.on('click', function(event) {

                var url = $(this).attr('data-load');

                $.getJSON(url, function(json, textStatus) {
                    if (json.next === "") {
                        $btn.remove();
                    };

                    var targetData  = template(json);
                    $('.js-request-item:last').before(targetData);
                    $btn.attr('data-load', json.next);
                });
            })
        },

        //59
        // Page: on campaign page, share after create campaign, summary
        // FUnction: to copy text
        // Platform: campaign page and share page(deskop), summary page (PWA)
        copyText: function() {
            var $copyLink = $('#copyLink');
            var $copyTrigger = $('.copy-trigger');
            var $clipboardItem = $('[data-clipboard-demo]');

            if(!$copyLink.length && !$copyTrigger.length && !$clipboardItem.length) return;

            Modernizr.load({
                load    : assets._clipboardCDN,
                complete: function () {
                    var clipboardDemos = new Clipboard('[data-clipboard-demo]');

                    clipboardDemos.on('success', function(e) {

                        if(e.trigger.classList.contains("donasi__share")){
                            var notif = $(e.trigger).siblings('.notif--copied');
                            notif.removeClass('hidden').delay(3000).queue( function(next){
                                $(this).addClass('hidden');
                                next();
                            });
                        }

                    });

                    clipboardDemos.on('error', function(e) {
                        // console.error('Action:', e.action);
                        // console.error('Trigger:', e.trigger);
                    });

                    $('#copyLink').on('click', function(){
                      $('#copiedLink').fadeToggle(700).delay(1000).fadeToggle(700);
                    });

                    $('.copy-trigger').on('click', function(e){
                      e.preventDefault;
                      var $tag = $(this).find('.tag-copied');
                      $tag.fadeToggle(700).delay(1000).fadeToggle(700);
                    });
                }
            });
        },

        //60
        // Page: on homepage
        // Function: switch content on success story section
        // Platform: desktop and PWA
        successSwitch: function() {
            $('.success__list').on('click', 'li' , function(event) {
                $(this).siblings('.active').removeClass('active');
                $(this).toggleClass('active deactive');
                $(this).siblings('li').find('.fa').removeClass('fa-chevron-up');
                $(this).siblings('li').find('.fa').addClass('fa-chevron-down');
                $(this).find('.fa').toggleClass('fa-chevron-up fa-chevron-down');
                $('article.mobile-hide').toggleClass('mobile-hide hidden');

                var href = $(this).find('a').attr('data-href');
                var string = String(href);
                var $article = $(string);

                $article.toggleClass('mobile-hide hidden');
            });
        },

        //61
        // Page: reward page dashboard
        // Function: to manage all functionality on reward page dashboard
        // Platform: desktop and PWA
        rewardModal: function() {
            var layar = $(window).width();

            $('.form__row').on('click', '.custom-radio', function(event) {
                $(this).parent('.form__row').find('.custom-radio__input:checked').removeAttr('checked');
                $(this).find('.custom-radio__input').attr('checked');
            });

            var getFilenameOnInputFile = function(){
                var $input = $('.form-input--file__with-label'),
                    $displayName = $('.form-label--file__name');

                $displayName.html('Tidak ada gambar').css('color', '#ccd0d3');

                $input.each(function() {
                    $(this).on('change', function(event) {
                        event.preventDefault();

                        var fullpath = $(this).val(),
                            filename = fullpath.split(/(\\|\/)/g).pop();

                        $displayName.text(filename).css('color', '#4d4d4d');

                        if (!$(this)){
                            $displayName.text('Tidak ada gambar').css('color', '#ccd0d3');
                        }
                    });
                });
            }


            $('#addReward').on('click', function(event) {
                $('.reward__modal').removeClass('opacity-0');
                $('.reward-box-list__item form').remove();

                if(!$('#template-blank').length) return;

                var $btn        = $(this);
                var $page       = $(window);
                var source      = $('#template-blank').html();
                var template    = Handlebars.compile(source);

                $('.reward-box-list__item').append(template);

                $('.chosen-select').chosen();

                if ($('.custom-radio:first').hasClass('checked')) {
                    $('.reward-weight').attr('min', 1);
                    $('.chosen-select').attr('required');
                }

                if ($('.custom-radio:last').hasClass('checked')) {
                    $('.reward-weight').attr('min', 0);
                    $('.chosen-select').removeAttr('required');
                }

                $('.shipping-detail input').attr('required');

                if (layar > 480) {
                    $('.mobile-radio').remove();
                };

                var $form       = $('.auto-num');
                var $inputValue = $('.auto-num-input');
                var minValue    = $inputValue.data('min');

                if ( !$inputValue.length ) return;

                Modernizr.load({
                    load    : assets._autoNum,
                    complete: function () {

                        // Create thousands separator value
                        $inputValue.autoNumeric({
                            digitGroupSeparator: '.',
                            decimalCharacter: ','
                        });

                        // Get non-separator value
                        function getValue() {
                            var value = $inputValue.autoNumeric('get');
                            return value;
                        }

                        // Validate field with the non-separator value
                        $inputValue.on('keyup paste', function () {
                            var value = getValue();

                            $inputValue.data('value', value);
                        });

                        // Submit non-separator value
                        $form.on('submit', function () {
                            $inputValue.val($inputValue.autoNumeric('get'));
                        });
                    }
                });

                getFilenameOnInputFile();
            });

            var addOpacity0 = function(event) {
                $('.reward__modal').addClass('opacity-0');
            }

            $('.reward__modal__background').on('click', addOpacity0);

            $('.btn--grey').on('click', addOpacity0);

            $('.reward__modal__close').on('click', addOpacity0);

            $('.reward-box-list__item').on('click', '.btn--grey, .btn--cancelgray', addOpacity0);

            $('.reward-box-list__item').on('change', '#non-barang', function(event) {
                $('.shipping-detail').addClass('hidden');
                $('.shipping-detail input').removeAttr('required');
                $('.reward-weight').attr('min', 0);
                $('.chosen-select').removeAttr('required');
            });

            $('.reward-box-list__item').on('change', '#barang', function(event) {
                $('.shipping-detail').removeClass('hidden');
                $('.shipping-detail input').attr('required');
                $('.reward-weight').attr('min', 1);
                $('.chosen-select').attr('required', '');
                document.querySelector('.chosen-select').selectedIndex = 1;
                $('.chosen-select').trigger('chosen:updated');
            });

            $('.reward-box-list__item').on('change', '#m-non-barang', function(event) {
                $('.shipping-detail').addClass('hidden');
                $('.shipping-detail input').removeAttr('required');
                $('.reward-weight').attr('min', 0);
                $('.chosen-select').removeAttr('required');
            });

            $('.reward-box-list__item').on('change', '#m-barang', function(event) {
                $('.shipping-detail').removeClass('hidden');
                $('.shipping-detail input').attr('required');
                $('.reward-weight').attr('min', 1);
                $('.chosen-select').attr('required');
                document.querySelector('.chosen-select').selectedIndex = 1;
                $('.chosen-select').trigger('chosen:updated');
            });

            $('.reward-box-list__item').on('click', '#gantiFotoReward', function(event) {
                event.preventDefault;
                $('#gantiFotoForm').removeClass('hidden');
                $('#gantiFotoReward').addClass('hidden');
                $('.reward-img').addClass('hidden');
                $('#gantiFotoForm').click();
            });

            $('.table').on('click', '.btnEditReward', function(event) {
                $('.reward__modal').removeClass('opacity-0');
                $('.reward-box-list__item form').remove();

                if(!$('#template').length) return;

                var $btn        = $('.btnEditReward');
                var $page       = $(window);
                var source      = $('#template').html();
                var template    = Handlebars.compile(source);

                var url = $(this).attr('data-load');

                $.getJSON(url, function(json, textStatus) {
                    var targetData  = template(json);
                    $('.reward-box-list__item').append(targetData);

                    if (layar > 480) {
                        $('.mobile-radio').remove();
                    };

                    $('.chosen-select').chosen();

                    if ($('.custom-radio:first').hasClass('checked')) {
                        $('.reward-weight').attr('min', 1);
                        $('.chosen-select').attr('required');
                        $('.chosen-select').val($('.chosen-select option:eq(1)').val());
                    }

                    if ($('.custom-radio:last').hasClass('checked')) {
                        $('.reward-weight').attr('min', 0);
                        $('.chosen-select').removeAttr('required');
                    }

                    var $form       = $('.auto-num');
                    var $inputValue = $('.auto-num-input');
                    var minValue    = $inputValue.data('min');

                    if ( !$inputValue.length ) return;

                    Modernizr.load({
                        load    : assets._autoNum,
                        complete: function () {
                            // Create thousands separator value
                            $inputValue.autoNumeric({
                                digitGroupSeparator: '.',
                                decimalCharacter: ','
                            });

                            // Get non-separator value
                            function getValue() {
                                var value = $inputValue.autoNumeric('get');
                                return value;
                            }

                            // Validate field with the non-separator value
                            $inputValue.on('keyup paste', function () {
                                var value = getValue();

                                $inputValue.data('value', value);
                            });

                            // Submit non-separator value
                            $form.on('submit', function () {
                                $inputValue.val($inputValue.autoNumeric('get'));
                            })
                            }
                        });
                    });

                    getFilenameOnInputFile();
            });

            $('.reward-box-list__item').on('click', '.custom-radio', function(event) {
                $(this).siblings('.custom-radio').removeClass('checked');
                $(this).addClass('checked');
            });

            var rewardModalAction = function(event) {
                var qty = $('.qty-reward').val();
                var donationVal = $('.donation-min').val();
                var donationTrim = donationVal.replace(/[^\d]/g, "");
                var donation = parseInt(donationTrim);

                var $validate = $('[data-validate]');
                if ( !$validate.length ) return;
                $validate.bazeValidate({
                    msgEmpty        : 'Harap isi bidang ini',
                    classInvalid    : 'form-input--error',
                    classValid      : 'form-input--success',
                    msgNumber       : 'Harap isi bidang ini'
                });

                if (qty < 0) {
                    $('.err').remove();
                    $('.msg-error').remove();
                    $('.qty-reward').removeClass('form-input--success');
                    $('.qty-reward').addClass('form-input--error');
                    $('.qty-reward').after('<div class="err" style="color:red"><b>Nilai minimal adalah 0.</b></div>');
                    event.preventDefault();
                }

                if (qty > -1) {
                    $('.err').remove();
                    $('.qty-reward').addClass('form-input--success');
                }

                var min = parseInt($('.donation-min').attr('data-donation'));
                var max = parseInt($('.donation-min').attr('data-donation')) - 1;

                if (donation < min) {
                    $('.donation-min').removeClass('form-input--success');
                    $('.donation-min').addClass('form-input--error');
                    $('.err-d').remove();
                    $('.donation-min').after('<div class="err-d" style="color:red"><b>Nilai minimal adalah ' + min +'</b></div>');

                    event.preventDefault();
                }

                if (donation > max) {
                    $('.err-d').remove();
                    $('qty-reward').addClass('form-input--success');
                }
            }

            $('.reward__modal__body').on('click', '.btn-save-reward', rewardModalAction);

            $('.reward__modal__body').on('click', '.btn-edit-reward', rewardModalAction);
        },

        //62
        // Page: on dashboard reward page and user-activation page
        // Function: to validate empty field input
        // Platform: reward page (desktop and PWA), user-activation page(PWA)
        bazeValidate: function() {
            var $validate = $('[data-validate]');

            if ( !$validate.length ) return;

            $validate.bazeValidate({
                msgEmpty        : 'Harap isi bidang ini',
            });
        },

        //63
        // Page: on dashboard campaign page, menu overview
        // Function: to read more updates from each user who contributed to each campaign
        // Platform: desktop
        overviewUpdate: function() {
            if(!$('#template-campaign').length) return;

            var $btn        = $('.overview-u-btn');
            var $page       = $(window);
            var source      = $('#template-campaign').html();
            var template    = Handlebars.compile(source);

            $('.update-list').on('click', '.overview-u-btn', function(event) {
                $(this).find('b').text('READ LESS');
                $(this).siblings('.preview').addClass('hidden');
                $(this).siblings('.desc').removeClass('hidden');
                $(this).toggleClass('overview-u-btn overview-u-btnless');
            });

            $('.update-list').on('click', '.overview-u-btnless', function(event) {
                $(this).find('b').text('READ MORE');
                $(this).siblings('.preview').removeClass('hidden');
                $(this).siblings('.desc').addClass('hidden');
                $(this).toggleClass('overview-u-btn overview-u-btnless');
            });
        },

        //64
        // Page: on all page that contains paymen-opt__item
        // Function: this is input radio button to choose payment method
        // Platform: desktop and PWA
        walletPay: function() {
            $('.payment-opt__item:eq(0)').on('click', function(event) {
                var walletSrc = $('#0').attr('data-wallet');
                var donationSrc = $('.form-action .btn').attr('data-donation');
                var wallet = parseInt(walletSrc);
                var donation = parseInt(donationSrc);

                if (wallet < donation) {
                    $('.form-action .btn').removeClass('btn--pink');
                    $('.form-action .btn').addClass('btn--disabled');
                } else if ($('#termsCheckDonation input').is(':checked') && wallet > donation) {
                    $('.form-action .btn').removeClass('btn--disabled');
                    $('.form-action .btn').addClass('btn--pink');
                }
            });

            $('.payment-opt__item:gt(0)').on('click', function(event) {
                if ($('#termsCheckDonation input').is(':checked')) {
                    $('.form-action .btn').removeClass('btn--disabled');
                    $('.form-action .btn').addClass('btn--pink');
                }
            });

            if ($('#0:checked').length) {
                var walletSrc = $('#0').attr('data-wallet');
                var donationSrc = $('.form-action .btn').attr('data-donation');
                var wallet = parseInt(walletSrc);
                var donation = parseInt(donationSrc);

                if (wallet < donation) {
                    $('.form-action .btn').removeClass('btn--pink');
                    $('.form-action .btn').addClass('btn--disabled');
                }

                if (wallet > donation) {
                    $('.form-action .btn').addClass('btn--pink');
                    $('.form-action .btn').removeClass('btn--disabled');
                }
            }


            var getDefaultCustRadio = function (el, item, desc){

                $(el).each(function() {
                    var $first = $(this).find(item+":eq(0)");
                    if ($(this).find(item+":gt(0).radio-check").length) {
                       $first.removeClass('radio-check');
                       $first.find(desc).addClass('hidden');
                       $first.find('input').prop('checked', false);
                    }else{
                        $first.addClass('radio-check');
                        $first.find(desc).removeClass('hidden');
                        $first.find('input').prop('checked', true)
                    }
                });
            }

            getDefaultCustRadio('.js-wallet-opt', '.js-wallet-opt__item', '.js-wallet-opt__desc');
        },

        //66
        // Page: on all page that needs toast notification
        // Function: toast notification
        // Platform: desktop and PWA
        flashToast: function() {
            if(!$('.toast-info').length && !$('.toast-success').length && !$('.toast-danger').length && !$('.toast-warning').length) return;

            Modernizr.load({
                load        : assets._toast,
                complete    : function () {
                    var dataTime = $('.toast-info').attr('data-time');

                    setTimeout(function() {
                        toastr.options = {
                            closeButton: false,
                            progressBar: true,
                            showMethod: 'slideDown',
                            timeOut: dataTime
                        };

                        if (!$('.toast-info').length) return;
                        var titleInfo = $('.toast-info').attr('data-title');
                        var msgInfo = $('.toast-info').attr('data-msg');
                        var target = $('.toast-info').attr('data-href');
                        toastr.info(msgInfo, titleInfo);

                        if ($('.toast-info').attr('data-href') != undefined) {
                            $('#toast-container').append('<a class="toast-href" href="'+target+'" target="_blank"></a>');
                        }

                    }, 1300);

                    setTimeout(function() {
                        toastr.options = {
                            closeButton: true,
                            progressBar: true,
                            showMethod: 'slideDown',
                            timeOut: dataTime
                        };

                        if (!$('.toast-success').length) return;

                        var titleSuccess = $('.toast-success').attr('data-title');
                        var msgSuccess = $('.toast-success').attr('data-msg');
                        var target = $('.toast-info').attr('data-href');
                        toastr.success(msgSuccess, titleSuccess);

                        if ($('.toast-success').attr('data-href') != undefined) {
                            $('#toast-container').append('<a class="toast-href" href="'+target+'" target="_blank"></a>');
                        }

                    }, 1300);

                    setTimeout(function() {
                        toastr.options = {
                            closeButton: true,
                            progressBar: true,
                            showMethod: 'slideDown',
                            timeOut: dataTime
                        };

                        if (!$('.toast-danger').length) return;

                        var titleDanger = $('.toast-danger').attr('data-title');
                        var msgDanger = $('.toast-danger').attr('data-msg');
                        var target = $('.toast-info').attr('data-href');
                        toastr.error(msgDanger, titleDanger);

                        if ($('.toast-danger').attr('data-href') != undefined) {
                            $('#toast-container').append('<a class="toast-href" href="'+target+'" target="_blank"></a>');
                        }

                    }, 1300);

                    setTimeout(function() {
                        toastr.options = {
                            closeButton: true,
                            progressBar: true,
                            showMethod: 'slideDown',
                            timeOut: dataTime
                        };

                        if (!$('.toast-warning').length) return;

                        var titleWarning = $('.toast-warning').attr('data-title');
                        var msgWarning = $('.toast-warning').attr('data-msg');
                        var target = $('.toast-info').attr('data-href');
                        toastr.warning(msgWarning, titleWarning);

                        if ($('.toast-warning').attr('data-href') != undefined) {
                            $('#toast-container').append('<a class="toast-href" href="'+target+'" target="_blank"></a>');
                        }

                    }, 1300);
                }
            });
        },

        //67
        // Page: on FAQ page
        // Function: accordion
        // Platform: desktop and PWA
        faqAccordion: function() {
            $('.accordion--faq:gt(0)').find('.accordion__body').hide();

            $('.accordion.accordion--faq').on('click', '.accordion__head', function(event) {
                $(this).siblings('.accordion__body').slideToggle(100);
                $(this).parents('.accordion').siblings('.accordion').find('.accordion__body').slideUp(100);
            });
        },

        //68
        // Page: on dashboard campaign (menu update)
        // Function: toggle for just 1 accordion and content
        // Platform: PWA
        singleAccordion: function() {
            $('.accordion.close').find('.accordion__body').hide();
            $('.accordion.accordion--single').on('click', '.accordion__head', function(event) {
                event.preventDefault();
                $(this).parents('.accordion--single').find('.accordion__body').slideToggle(100);
                $(this).find('.accordion__button .fa').toggleClass('fa-chevron-down fa-chevron-up');
            });
        },

        //69
        // Page: on dashboard campaign (menu update) and 5-langkah-mudah-galang-dana page
        // Function: accordion for more than 1 toggle
        // Platform: 5-langkah-mudah-galang-dana page (desktop and PWA) annd dashboard campaign (PWA)
        groupAccordion: function() {
            $('.accordion-wrapper .accordion--group:gt(0)').find('.accordion__body').hide();

            $('.accordion-wrapper .accordion--group').on('click', '.accordion__head', function(event) {
                $(this).parents('.accordion').siblings('.accordion').removeClass('active');
                $(this).siblings('.accordion__body').slideToggle(100);
                $(this).parents('.accordion--group').siblings('.accordion--group').find('.accordion__body').slideUp(100);
                $('.accordion--group').find('.accordion__button .fa').removeClass('fa-chevron-up');
                $('.accordion--group').find('.accordion__button .fa').addClass('fa-chevron-down');
                $(this).parents('.accordion').toggleClass('active');
                if ($(this).parents('.accordion').hasClass('active')) {
                    $(this).parents('.accordion--group').find('.accordion__button .fa').removeClass('fa-chevron-down');
                    $(this).parents('.accordion--group').find('.accordion__button .fa').addClass('fa-chevron-up');
                }
            });
        },

        //71
        // Testing staging
        // Page: dashboard campaign (menu edit deadline)
        // Function: to validate input date so its greater than today's date
        // Platform: desktop
        minDate: function() {
            var $date = $('.date-picker');
            var $mobileDate = $('input[type="date"]');

            if (!$date.length && !$mobileDate.length) return;

            $('.btn--blue').on('click', function(event) {
                var dateValue = $('.date-picker').val();
                var date = new Date();
                var day = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getFullYear();
                var combinedDate = month + '/' + day + '/' + year;
                var existingDate= new Date(dateValue);
                var todayDate = new Date(combinedDate);
                // var mobile = new Date($('input[type="date"]').val());

                if (existingDate < todayDate) {
                    $('.date-picker').siblings('.err-msg').remove();
                    $('.date-picker').removeClass('form-input--success');
                    $('.date-picker').addClass('form-input--error');
                    var msg = $('.date-picker').attr('data-error');
                    $('.date-picker').after('<div class="err-msg">'+msg+'</div>');
                    event.preventDefault();
                }

                if (existingDate > todayDate) {
                    $('.date-picker').siblings('.err-msg').remove();
                    $('.date-picker').removeClass('form-input--error');
                    $('.date-picker').addClass('form-input--success');
                }
            });
        },

        //72
        // Page: on campaign registration step 1
        // Function: to validate input value donation
        // Platform: desktop
        minDonate: function() {

            // $('.donasi__label__input').focusout(function(event) {
            //     $('.donasi__label__input').valueTrim.slice(0, -3);
            // });
            $('#register-campaign .btn--blue').on('click', function(event) {
                var errorMin = $('.donasi__label__input').attr('data-error-min');
                var errorMax = $('.donasi__label__input').attr('data-error-max');
                var min = $('.donasi__label__input').attr('data-min');
                var max = $('.donasi__label__input').attr('data-max');
                var valueVal = $('.donasi__label__input').val();
                var valueTrim = valueVal.replace(/[^\d]/g, "");
                var value = parseInt(valueTrim);

                if (value < min) {
                    event.preventDefault();
                    $('.donasi__label__input').siblings('.err-msg').remove();
                    $('.donasi__label__input').addClass('form-input--error');
                    $('.donasi__label__input').after('<div class="err-msg">'+errorMin+'</div>');
                }

                if (value > max) {
                    event.preventDefault();
                    $('.donasi__label__input').siblings('.err-msg').remove();
                    $('.donasi__label__input').addClass('form-input--error');
                    $('.donasi__label__input').after('<div class="err-msg">'+errorMax+'</div>');
                }

                if (value > min && value < max) {
                    $('.donasi__label__input').siblings('.err-msg').remove();
                    $('.donasi__label__input').addClass('form-input--success');
                }
            });
        },

        //74
        // Page: on all page that need first-loader
        // Function: toggle first-loader after user click CTA
        // Platform: desktop and PWA
        triggerFirstLoader:function() {
            $('.contribute-form').on('click', '.btn--pink', function(event) {
                // $('.load-overlay').removeClass('hidden');
                // $('.first-loader').show();
                $('body').append('<div class="first-loader"><img src="/elements/images/spin.svg"></div>');
            });

            $('#donations-form').on('click', '.btn--pink', function(event) {
                // $('.load-overlay').removeClass('hidden');
                $('body').append('<div class="first-loader"><img src="/elements/images/spin.svg"></div>');
            });

            $('.white-box').on('click', '.btn--pink', function(event) {
                // $('.load-overlay').removeClass('hidden');
                $('body').append('<div class="first-loader"><img src="/elements/images/spin.svg"></div>');
            });

            $('.material-form-footer').on('click', '.btn', function(event) {
                // $('.load-overlay').removeClass('hidden');
                $('body').append('<div class="first-loader"><img src="/elements/images/spin.svg"></div>');
            });

            $('.pwa-donation__payment').on('click', '.btn', function(event) {
                // $('.load-overlay').removeClass('hidden');
                $('body').append('<div class="first-loader"><img src="/elements/images/spin.svg"></div>');
            });

            $('.dompet-section').on('click', '.btn', function(event) {
                // $('.load-overlay').removeClass('hidden');
                $('body').append('<div class="first-loader"><img src="/elements/images/spin.svg"></div>');
            });

            $('.pwa-donate-form').on('click', '.btn', function(event) {
                $('body').append('<div class="first-loader"><img src="/elements/images/spin.svg"></div>');
            });
        },

        //75
        // Page: dashboard page
        // Condition: datatable element is created by datatable plugin, so we cant hardcode ga event on those element
        // Solution: create google analytic event from js
        // Function: to create custom google analytic
        // Platform: desktop and PWA
        customGAEvents:function() {
            $('.dashboard-page .user-dashboard .project-list').on('click', '.dataTables_length select', function(event) {
                ga('send', 'event', 'dashboard.dashboard-overview.donasi-saya.show-entries', 'click', 'dashboard.dashboard-overview.donasi-saya.show-entries');
            });

            $('.dashboard-page .user-dashboard .project-list').on('click', '.dataTables_paginate .next', function(event) {
                ga('send', 'event', 'dashboard.dashboard-overview.donasi-saya.next-page', 'click', 'dashboard.dashboard-overview.donasi-saya.next-page');
            });

            $('.dashboard-page .user-dashboard .project-list').on('click', '.dataTables_paginate .previous', function(event) {
                ga('send', 'event', 'dashboard.dashboard-overview.donasi-saya.previous-page', 'click', 'dashboard.dashboard-overview.donasi-saya.previous-page');
            });
        },

        //77
        // Page: on all pages
        // Function: Site Header Transformation
        // Platform: PWA
        pwaHeaderPosition: function(){
            var $header = $('.pwa-header'),
                $bodyWrapper = $('.pwa-wrapper');

            $('.pwa-wrapper.active').css('top', '0px')
            var scrolled = function(){
                if($(document).scrollTop() > 60){

                    if($('#smartbanner')){
                        $header.css('position','fixed');
                    }else {
                        $header.css('position','absolute');
                    }
                        $header.css('top', 0);
                }else{
                    if($('#smartbanner')){
                        $header.css('position','relative')
                    }
                }
            }
            $('div.pwa-wrapper.active').css('top','0px');

            scrolled();

            $('.pwa-wrapper.active').css('top','2px');

            $(document).scroll(function(event) {
                scrolled();
            });
        },

        //81
        // Testing staging
        // Page: on all pages
        // Function: toggle search modal
        // Platform: PWA
        pwaSearch: function() {
            $(document).on('click', '.btn--search', function(event) {
                $('.pwa-header-search').toggle();
                $('.pwa-header-search input').focus();
                $('.pwa-search-query').toggle();
                // $('.pwa-category-switcher').hide();
                // $('.pwa-select__activecat').hide();
                $('.pwa-header').css('position','fixed')
                $('body').append('<div class="pwa-body-overlay--full"></div>');
            });

            $('.pwa-header').on('click', '.btn--cancel', function(event) {
                $('.pwa-header-search').toggle();
                $('.pwa-search-query').toggle();
                $('.pwa-body-overlay').remove();
                $('.pwa-body-overlay--full').remove();
                // $('.pwa-category-switcher').show();
                // $('.pwa-select__activecat').show();
                $('.pwa-header').css('position','relative')
            });
        },

        //82
        // Page: on all pages
        // Function: close each element from popular search
        // Platform: PWA
        pwaRemoveSearchResult: function() {
            $('.pwa-header').on('click', '.btn--close', function(event) {
                $(this).parents('li').remove();
            });

            // $('.pwa-campaign-banner').on('click', '.btn--close', function(event) {
            //     $(this).parents('li').remove();
            // });
        },

        //88
        // Page: campaign page
        // Function: switch donors element between 'based on amount' or 'based on time'
        // Platform: desktop
        donaturFilter: function() {
            $('.custom-radio.donasi').click(function(event) {
                $(this).addClass('checked');
                $(this).find('input').attr('checked', 'checked');
                $(this).siblings('.custom-radio').removeClass('checked');
                $(this).siblings('.custom-radio').find('input').removeClass('checked');
                $('#project-contributor__dana').removeClass('sr-only');
                $('#project-contributor__waktu').addClass('sr-only');
                $('#project-donatur__dana').removeClass('sr-only');
                $('#project-donatur__waktu').addClass('sr-only');
            });

            $('.custom-radio.waktu').click(function(event) {
                $(this).addClass('checked');
                $(this).find('input').attr('checked', 'checked');
                $(this).siblings('.custom-radio').removeClass('checked');
                $(this).siblings('.custom-radio').find('input').removeClass('checked');
                $('#project-contributor__dana').addClass('sr-only');
                $('#project-contributor__waktu').removeClass('sr-only');
                $('#project-donatur__dana').addClass('sr-only');
                $('#project-donatur__waktu').removeClass('sr-only');
            });
        },

        //89
        // Page: campaign page
        // Function: switch campaign tabs
        // Platform: PWA
        pwaCampaignTab: function() {
            var $tabAnchor = $('.pwa-project-detail-tab-nav .tab__item');
            var $tabPanel = $('.pwa-campaign-story');

            $tabAnchor.on('click', function (e) {
                e.preventDefault();

                var target = $(this).attr('href')

                $tabAnchor.removeClass('active')
                $(this).addClass('active')

                $tabPanel.removeClass('active')
                $(target).addClass('active')
            })
        },

        //90
        // Page: campaign page
        // Function: to create sticky campaign tab when user scroll hit the tab
        // Platform: PWA
        pwaStickyCampaignTab: function() {
            var $pwaWrapper        = $('#pwaNew .tab-nav-wrapper');

            if(!$pwaWrapper.length) return

            var mywindow        = $(window),
            pwaWrapperH        = $pwaWrapper.outerHeight(true),
            pwaHeaderHeight = $('.pwa-header').outerHeight(true),
            pwaWrapperTop      = $pwaWrapper.offset().top;

            function handleScrollPwa(){
                if (mywindow.scrollTop() > pwaWrapperTop - pwaHeaderHeight) {
                    $pwaWrapper.addClass('fixed');
                    $('.pwa-campaign-story').css('padding-top', pwaWrapperH);;
                }
                else {
                    $pwaWrapper.removeClass('fixed');
                    $('.pwa-campaign-story').css('padding-top', '0');;
                }
            }

            handleScrollPwa();

            mywindow.on('scroll', handleScrollPwa);
        },

        //92
        // Page: explore page
        // Function: to choose category
        // Platform: desktop
        exploreFilter: function() {
            // $('.explore-filter__cat').on('click', function(event) {
            //     $('.explore-filter__opt').toggleClass('hidden show');
            //     $(this).find('.fa').toggleClass('fa-chevron-down fa-chevron-up');
            // });

            var $toggle = $('.js-explore-filter');

            if( !$toggle.length ) return;

            $toggle.on('click', function(event) {
                event.preventDefault();
                event.stopPropagation();
                var $opt = $(this).find('.js-explore-filter__opt');
                $(this).siblings('.js-explore-filter').find('.js-explore-filter__opt').addClass('hidden');
                $opt.toggleClass('hidden');
            });
            
            // Enable link to click, stop bubbling to parent toggle element
            $('.js-explore-filter__opt').on('click', '.js-explore-link', function(event) {
                event.stopPropagation();
            });

            Site.closeOutsideContainer($toggle, $('.js-explore-filter__opt'));
            // $('.explore-filter').siblings('.container').click(function(event) {
            //     $('.explore-filter__opt').removeClass('show');
            //     $('.explore-filter__opt').addClass('hidden');
            //     $('.explore-filter__cat').find('.fa').removeClass('fa-chevron-up');
            //     $('.explore-filter__cat').find('.fa').addClass('fa-chevron-down');
            // });
        },

        //94
        // Page: all pages
        // Function: transform header (mostly switch header color)
        // Platform: desktop
        toggleSearch: function() {
            var $field           =  $('.header-search-field'),
                $overlay         = $('.header-search-overlay'),
                $header          = $('.site-header'),
                $logoUnactive    = $('#site-logo__header-unactive'),
                $logoActive      = $('#site-logo__header-active'),
                $fieldcampaign   = $('.header-search-field__campaign');

            $('.header-search-drop').on('focus', function(event) {
                event.preventDefault();

                $overlay.addClass('show');
                $overlay.removeClass('sr-only');
                if(!$header.hasClass('site-header--alt')){
                    $header.addClass('active');
                }

                $logoUnactive.addClass('hidden');
                $logoActive.removeClass('hidden');

            });

            var unactivate = function(event){
                event.stopPropagation();
                $overlay.removeClass('show');
                $overlay.addClass('sr-only');
                // $('body').removeClass('active');
                $logoUnactive.removeClass('hidden');
                $logoActive.addClass('hidden');

                    if($(document).scrollTop() > 50){
                        $header.addClass('active');
                        $logoUnactive.addClass('hidden');
                        $logoActive.removeClass('hidden');
                    }else{
                        $header.removeClass('active');
                        $logoUnactive.removeClass('hidden');
                        $logoActive.addClass('hidden');
                    }
            }

            $overlay.click(function(event) {
                unactivate(event);
            });

            $('.header-search-drop').on('keyup', function(event) {
                event.preventDefault();

                if(event.which == 27){
                    unactivate(event);
                    $(this).blur();
                }
            });
        },

        //96
        // Page: on payment-confirmation page, donation page, donation-via-reward-button page
        // Function: to choose payment method
        // Platform: PWA
        pwaPay: function() {
            //showing combobox payment
            $('.pwa-pay-select').click(function(event) {
                $('.pwa-pay-choose').removeClass('hidden');
            });

            $('.pwa-pay-choose__body .payment-opt').on('click', '.payment-opt__item', function(event) {
                var payment = $(this).find('input').val();
                var wording = $(this).find('input').siblings('label').text();
                $('.pwa-pay-value').val(payment);
                $('.pwa-pay-choose').addClass('hidden');
                $('#pwaPay').text(wording);
            });

            $('.pwa-pay-choose').on('click', function(event) {
                if(!$(event.target).is('.pwa-pay-choose__body'))
                {
                    $('.pwa-pay-choose').addClass('hidden');
                }
            });
        },

        //98
        // Page: on faq page and terms-and-conditions
        // Function: switch tabs
        // Platform: faq page (desktop) and terms-and-conditions(PWA)
        miniTabs: function() {
            $('.mini-tabs').on('click', 'li', function(event) {
                $('.mini-tabs').find('.active').removeClass('active');
                $(this).addClass('active');

                var target  = $(this).data('target');
                var faq     = $('.section-faq-list');
                var sibling = $(this).siblings('li').data('target');

                $(faq).addClass('hidden');
                $(sibling).addClass('hidden');
                $(target).removeClass('hidden');
            });

            $('.mini-tab__nav').on('click', 'li', function(event) {
                $(this).parents('.mini-tab__nav').find('.active').removeClass('active');
                $(this).addClass('active');
                var target = $(this).data('target');
                $(this).parents('.mini-tab').find('.mini-tab__content').removeClass('active');
                $(target).addClass('active');
            });
        },

        //101
        // Page: campaign page
        // Function: toggle modal with timeout
        // Platform: desktop
        modalTime: function() {
            $(document).ready(function() {
                var time = $('.modal--time').data('time');
                setTimeout(function(){
                    $('.modal--time').toggleClass('show hidden');
                }, time);
            });
        },

        //102
        // Page: on all page that need modal-trigger
        // Function: toggle modal
        // Platform: desktop and PWA
        modalOpen: function() {
            $('.modal-trigger').click(function(event) {
                var target = $(this).data('target');
                $(target).toggleClass('show hidden');
            });
        },

        //103
        // Page: on all page that contain modal
        // Function: close active modal
        // Platform: desktop and PWA
        modalClose: function() {
            $('.modal').on('click', '.modal__close', function(event) {
                event.preventDefault();
                $(this).parents('.modal').toggleClass('show hidden');
            });

            $('.modal').on('click', '.modal__bg', function(event) {
                event.preventDefault();
                $(this).parents('.modal').toggleClass('show hidden');
            });
        },

        //104
        // On age payment summary, payment non-login, login and register this is unused function
        // On campaign page (desktop), its not clear that this is used or not
        modalFbShare: function() {
            $('.modal .btn--fb').click(function(event) {
                $(this).parents('.modal').toggleClass('show hidden');
            });
        },

        //105
        // Page: share-campaign-after-created page
        // Function: autoclose modal
        // Platform: PWA
        modalAutoClose: function() {
            $(document).ready(function() {
                var time = $('.modal--autoClose').data('time');
                setTimeout(function(){
                    $('.modal--autoClose').removeClass('hidden')
                                          .delay(time)
                                          .queue(function(){
                                            $(this).fadeOut(1000);
                                            $(this).dequeue();
                                          });
                }, 1000);
            });
        },

        /*
          105
          Halaman: FAQ dan New Register Campaign
          Platform : Desktop dan PWA
          Fungsi : Membuat Carousel slick pada tab pilihan, melalui event click
        */
        switcher:function() {
            $('.switcher__nav').on('click', 'li', function(event) {
                $(this).siblings('.active').removeClass('active');
                $(this).addClass('active');
                var target  = $(this).data('target');
                var desc    = $(this).data('desc');
                $(this).parents('.switcher').find('.switcher__content').removeClass('active');
                $(target).addClass('active');
                $('.switcher__desc').removeClass('active');
                $(desc).addClass('active');
            });

            $('.switcher__nav').on('click', '.carousel__item', function(event) {
                event.preventDefault();
                var target = $(this).data('target');
                $('.carousel__item').removeClass('active');
                $(this).addClass('active');
                $('.switcher__content').removeClass('active');
                $(target).addClass('active');
            });
        },

        /*
          108
          Halaman: Semua halaman
          Platform : PWA
          Fungsi : Mendeteksi pelemparan sebuah link. jika di halaman munculkan loader
        */
        pwaLoader: function() {
            $('#pwaNew a[rel != "external"]').not('[href*="#"]').click(function(event) {
                if($(this).attr('target') != '_blank'){
                    $(this).attr('rel');
                    $('.first-loader').removeClass('hidden');
                }
            });
        },

        /*
          109
          Halaman: Donation Step 1, Payment 21, Create 21 dan Create Pre Selected
          Platform : PWA
          Fungsi : Mengecek checkbox terms dan kondisi jika user setuju untuk melakukan pembuatan , pembayaran dan
                   juga melakukan pengecekan wallet user terhadap donasi
        */
        termsDonation: function() {
            $('#termsCheckDonation').click(function(event) {
                var walletSrc   = $('.payment-opt__item #0').attr('data-wallet');
                var wallet      = parseInt(walletSrc);
                var donationSrc = $('.form-action .btn').attr('data-donation');
                var donation    = parseInt(donationSrc);

                if(!$('#termsCheckDonation input').is(':checked')) {
                    $('#termsCheckDonation input').prop('checked', true);
                    if ($('.payment-opt__item:eq(0)').hasClass('radio-check') && wallet > donation) {
                        $('.form-action .btn').addClass('btn--pink');
                        $('.form-action .btn').removeClass('btn--disabled');
                    } else if ($('.payment-opt__item:eq(0)').hasClass('radio-check') && wallet < donation) {
                        $('.form-action .btn').removeClass('btn--pink');
                        $('.form-action .btn').addClass('btn--disabled');
                    } else {
                        $('.form-action .btn').addClass('btn--pink');
                        $('.form-action .btn').removeClass('btn--disabled');
                    }
                } else {
                    $('#termsCheckDonation input').prop('checked', false);
                    $('.form-action .btn').removeClass('btn--pink');
                    $('.form-action .btn').addClass('btn--disabled');
                }
            });

            // Mengubah property id property tersebut dengan klik event handler
            $('#termsCheckDonation input').click(function(event) {
                if($(this).is(':checked')) {
                    $(this).prop('checked', false);
                } else {
                    $(this).prop('checked', true);
                }
            });
        },

        /*
          110
          Halaman: Create Detail Campaign dan Membuat Campaign Galang dana
          Platform : Desktop
          Fungsi : Mengecek checkbox terms dan kondisi jika user setuju untuk melakukan transaksi campaigner. Jika setuju
                   maka button input akan berubah menjadi button yang valid(button pink), jika tidak maka akan menjadi button disable
        */
        termsCampaigner: function() {
            $('#termsCheckCampaigner').click(function(event) {
                if($(this).find('input').is(':checked')) {
                    $(this).find('input').prop('checked', false);
                    $('.form__row--action .btn:last').toggleClass('btn--blue btn--disabled');
                    $('.switcher .btn:last').addClass('btn--disabled');
                    $('.switcher .btn:last').removeClass('btn--pink');
                } else {
                    $(this).find('input').prop('checked', true);
                    $('.form__row--action .btn:last').toggleClass('btn--blue btn--disabled');
                    $('.switcher .btn:last').removeClass('btn--disabled');
                    $('.switcher .btn:last').addClass('btn--pink');
                }
            });

            $('#termsCheckCampaigner input').click(function(event) {
                if($(this).is(':checked')) {
                    $(this).prop('checked', false);
                } else {
                    $(this).prop('checked', true);
                }
            });
        },

        /*
          114
          Halaman: Campaign-register, Campaign-edit, Campaign-donatur, Dashboard-campaign-edit, Dashboard-campaign-nofundraiser, Dashboard-campaign-offline, Dashboard-campaign-update, Dashboard-campaign
          Platform : Desktop
          Fungsi : Mengecek checkbox terms dan kondisi jika user setuju untuk melakukan transaksi campaigner. Jika setuju
                   maka button input akan berubah menjadi button yang valid(button pink), jika tidak maka akan menjadi button disable
        */
        autoFillLink: function() {
            $('#campaignTitle').keyup(function(event) {
                var data    = $(this).val();
                var data2   = data.toLowerCase();
                var title   = data2.replace(/[^A-Z0-9]/ig, "");
                var text    = title.substring(0,20);
                $('#link').val(text);
            });
        },

        /*
          115
          Halaman: FAQ
          Platform : Mobile
          Fungsi : Membuat dot aktif ketika card diklik
        */
        carouselCard: function() {
            $('.switcher--card').on('click', '.slick-active + .slick-slide', function(event) {
                if($('.slick-dots .slick-active').next().is('li')) {
                    $('.slick-dots .slick-active').next('li').find('button').click();
                    var target = $('.carousel__item.active').data('target');
                    $(target).addClass('active');
                }
            });
        },

        /*
          117
          Halaman: Semua yang memiliki Header
          Platform : Mobile
          Fungsi : Ketika tombol option menu diklik maka akan muncul list pilihan navigasi, dan page tidak dapat discroll
        */
        newPwaNav: function() {
            $('#pwaNavBtn').click(function(event) {
                $('.pwa-nav-new').toggleClass('active');
                $('html').addClass('no-scroll');
            });

            $('#pwaNavClose').click(function(event) {
                $('.pwa-nav-new').toggleClass('active');
                $('html').removeClass('no-scroll');
            });
        },

        /*
          118
          Halaman: Semua yang memiliki loader
          Platform : Mobile
          Fungsi : Ketika beberapa asset di load, loader akan disembunyikan
        */
        removeLoader: function() {
            var element =  document.querySelector('.first-loader');
            if (typeof(element) != 'undefined' && element != null)
            {
                var parent = document.querySelector('body');
                var spin = document.querySelector('.first-loader');
                spin.classList.add('hidden');
            }
        },

        /*
          118
          Halaman: Dashboard campaign no fundraiser dan create campaign
          Platform : Mobile
          Fungsi : Dropdown pilihan deadline
        */
        customDropdownTime: function() {
            //tipe deadline apakah forever-running atau with-deadline
            var deadlineType =  $('.dropdown--time .dropdown__opt__item.active input');
            var startData   = deadlineType.val();
            var startTarget = deadlineType.parents('.dropdown').find('.dropdown__input').data('target');
            var startTargetValue = $(startTarget).val();

            var setValueDate = function(target, targetValue){
                //jika tanggal di input tanggal belum diisi
                if(targetValue == ''){
                    //isi dengan tanggal hari ini
                    var dateData = moment().add(0, 'days').format("YYYY-MM-DD");
                    //jika sudah diisi
                }else{
                    //isi dengan tanggal yang sudah ada
                    var dateData = moment(targetValue).format("YYYY-MM-DD");
                }
                $(target).attr('type', 'date');
                $(target).removeAttr('disabled');
                $(target).val(dateData);

            };

            setValueDate(startTarget, startTargetValue);

            //set value dropdown__input (value buat dikirim ke backend)
            $('.dropdown--time .dropdown__input').val(startData);


            $('.dropdown--time .dropdown__head').click(function(event) {
                $(this).siblings('.dropdown__opt').removeClass('hidden');
            });

            $('.dropdown--time .dropdown__opt').on('click', '.dropdown__opt__item', function(event) {
                event.preventDefault();
                var data    = $(this).find('input').val();
                var text    = $(this).find('label').text();

                $(this).parents('.dropdown').find('.dropdown__opt__item').removeClass('active');
                $(this).addClass('active');
                //set value dari dropdown__input dari value nya dropdown__opt__item yang dipilih
                $(this).parents('.dropdown').find('.dropdown__input').val(data);
                //set teks dari teks yang ditampilkan dari teks nya dropdown__opt__item yang dipilih
                $(this).parents('.dropdown').find('.dropdown__val').text(text);

                // var target      = $(this).parents('.dropdown').find('.dropdown__input').data('target');

                $('.dropdown__opt').addClass('hidden');
            });
        },

        /*
          119
          Halaman: Dashboard Campaign Edit, Dashboard Campaign Offline, Dashboard Campaign no fundraiser, Edit Campaign dan Create Campaign
          Platform : Mobile
          Fungsi : Custom dropdown seperti modal untuk di mobile
        */
        customDropdownClose: function() {
            $('.dropdown').on('click', '.dropdown__close', function(event) {
                event.preventDefault();
                $(this).parents('.dropdown__opt').addClass('hidden');
            });
        },

        /*
          120
          Halaman: Explore Campaign
          Platform : Mobile
          Fungsi : Ketika diklik akan muncul pilihan kategori, dan halaman tidak dapat di scroll
        */
        pwaSearchFilter: function() {

            // Show PWA Option
            $('.pwa-filter').on('click', '.pwa-filter__item', function(event) {
                event.preventDefault();
                var target = $(this).data('target');
                $(target).removeClass('hidden');
                $(target).addClass('show');
                $('body').addClass('active');
                $('html').addClass('no-scroll');
                $(target).animate({top: '50%'});
                $('.overlay').addClass('overlay--search');
            });

            // Close PWA Option
            $('.pwa-filter__head').on('click', '.btn', function(event) {
                event.preventDefault();
                removeSearchOption()
            });

            // Function Remove Modal
            function removeSearchOption() {
              $('.pwa-filter__opt').animate({top: '150%'}, 400, function(){
                  $('.pwa-filter__opt').addClass('hidden');
                  $('.overlay').removeClass('overlay--search');
              });
              $('body').removeClass('active');
              $('html').removeClass('no-scroll');
            }

            // Overlay Close event
            $('.overlay').click(function() {
              removeSearchOption()
            })

        },

        /*
          121
          Halaman: Partner
          Platform : Mobile
          Fungsi : Ketika diklik akan muncul list partner sesuai kategori
        */
        partnerFilter: function() {
            $('.partner-filter').on('click', 'li', function(event) {
                event.preventDefault();
                $('.partner-filter').find('li').removeClass('active');
                $(this).addClass('active');
                var target = $(this).find('a').attr('href');
                $('.partner-body').addClass('hidden');
                $(target).removeClass('hidden');

                $('.partner-body').removeClass('active');
                $(target).addClass('active');
                $('.pwa-wrapper').attr('data-target', target);
            });
        },

        /*
          122
          Halaman: Reward
          Platform : Mobile
          Fungsi : Tab untuk memunculkan sesuai target yang akan diklik
        */
        pageTab: function() {
            $('.page-tab').on('click', 'li.page-tab__item', function(event) {
                event.preventDefault();
                $('.page-tab li.page-tab__item').removeClass('active');
                $(this).addClass('active');
                $('.page-tab__target').addClass('hidden');
                var target = $(this).find('a').attr('href');
                $(target).removeClass('hidden');
            });
        },

        /*
          123
          Tag : Bug !
          Halaman: Setting Verifikasi dan Setting Profile
          Platform : Mobile
          Fungsi : Ketika input gambar berganti maka label-filenya akan hilang
        */
        pwaVerifikasi: function() {
            $('#fotoVerifikasi #profpict').change(function(event) {
                $(this).siblings('.label-file').toggleClass('active');
            });
        },

        /*
          124
          Halaman: Beberapa halaman yang membutuhkan load more
          Platform : Mobile / Desktop
          Fungsi : Ketika button trigger ajax diklik maka akan load data sebagai api
        */
        generalAjaxLoad: function() {
            if(!$('#template').length) return;

            Handlebars.registerHelper('if_eq', function(a, b, opts) {
                if(a == b) // Or === depending on your needs
                    return opts.fn(this);
                else
                    return opts.inverse(this);
            });

            Handlebars.registerHelper('if_lt', function(a, b, opts) {
                if(a < b) // Or === depending on your needs
                    return opts.fn(this);
                else
                    return opts.inverse(this);
            });

            Handlebars.registerHelper('if_gt', function(a, b, opts) {
                if(a > b) // Or === depending on your needs
                    return opts.fn(this);
                else
                    return opts.inverse(this);
            });

            var source      = $('#template').html();
            var template    = Handlebars.compile(source);

            $(document).on('click', '.ajax-trigger' , function(event) {
                var btn     = $(this);
                var url     = $(this).attr('data-load');
                var target  = $(this).attr('data-target')
                var lastData

                $.ajax({
                    url: url,
                    dataType: 'json',
                    async: false,
                    success: function(json) {
                        lastData = url;
                        var targetData  = template(json);
                        $(target).append(targetData);
                        $(btn).attr('data-load', json.next);
                        $(btn).removeClass('clickable');


                        // if(lastData !== url && url !== "") return


                        if (json.next === "") {
                            $(btn).addClass('sr-only');
                        };

                        if (json.next.length > 0) {
                            $(btn).removeClass('sr-only');
                        };
                    }
                }).done(function() {
                    $(btn).addClass('clickable');
                });
            });
        },

        /*
          125
          Halaman: Beberapa halaman yang membutuhkan load more, Contoh: Partner dan Search
          Platform : Mobile
          Fungsi : Ketika scroll viewport sudah melebihi dari document, maka ajax-trigger akan diklik
        */
        generalAjaxScroll: function() {
            if(!$('.ajax-trigger').length) return;

            $('#pwaNew .pwa-wrapper').scroll(function(event) {
                var height = $(document).height() - $(this).height() - 100;
                var scroll = $(this).scrollTop();

                if (scroll > height) {
                    $('.ajax-trigger').click();
                }
            });
        },

        //127 Reuse
        scrollToFixNav: function() {
            $('#pwaNew .pwa-wrapper').scroll(function(event) {
                var scroll = $(this).scrollTop();
                var height = 130;
                if (scroll > height) {
                    $('#pwaDashboardCampaign .page-tab').addClass('fixed');
                    $('#pwaDashboardCampaign .page-tab__target').addClass('addTop');
                }

                if (scroll < height) {
                    $('#pwaDashboardCampaign .page-tab').removeClass('fixed');
                    $('#pwaDashboardCampaign .page-tab__target').removeClass('addTop');
                }
            });
        },

        /*
          128
          Halaman: Create campaign
          Platform : Mobile
          Fungsi : Ketika diklik maka text tombolnya berubah sesuai dengan valuenya
        */
        getRewardCheckboxVal: function(){
            // var count = 0;
            // $('#rewardCheckbox').click(function(){
            //     count++;
            //     if(count == 1){
            //         $('#createCampaign').text('Lanjut');
            //         count++;
            //     } else if (count > 2){
            //         $('#createCampaign').text('Mulai Campaign');
            //         count = 0;
            //     }
            // });

            $('#reward-option').on('change', function(event) {
                var val = $(this).val();
                (val == '1') ?
                  $('#createCampaign').text('Mulai Campaign') :
                  $('#createCampaign').text('Lanjut');

            });
        },

        /*
          129
          Halaman: Campaign Detail
          Platform : Desktop
          Fungsi : Ketika tabnya pesan diklik maka target tidak akan berubah kecuali tab lain
        */
        hideDonateBtn: function() {
            var $tabPesan = $('.tab-nav-wrapper a[href="#pesan"]');
            var $tabLain = $('.tab-nav-wrapper a[href!="#pesan"]');

            $tabPesan.on('click', function(){
                $('.pwa-campaign-donate').hide();
            });
            $tabLain.on('click', function(){
                $('.pwa-campaign-donate').show();
            });
        },

        /*
          130
          Halaman: Campaign Share (gmail)
          Platform : Desktop
          Fungsi : Event button sendMail klik, akan memunculkan message alert. menampilkan sesuai dengan data attribute
        */
        toggleSuccessShare: function(){
            $('.sendMail').on('click', function(){
                $('.share-campaign__successAlert').slideToggle(700).delay(500).slideToggle()
                var mailList = $(this).attr('data-mailList');
                $('#'+ mailList).delay(1200).slideToggle(700);
            });
        },

        /*
          131
          Halaman: Campaign Share (gmail)
          Platform : Desktop
          Fungsi : Event button removeMail klik, akan menutup list yang diklik
        */
        removeMailList: function(){
            $('.removeMail').on('click', function(){
                var mailList = $(this).attr('data-mailList');
                $('#'+ mailList).slideToggle(700);
            });
        },

        /*
          131
          Halaman: Donation step 1
          Platform : Mobile
          Fungsi : Event handler menampilkan modal dalam pemilihan reward
        */
        rewardSelect: function() {
            $('.floatSelect-select').click(function(event) {
                $('.floatSelect-choose').removeClass('hidden');
            });

            $('.floatSelect-choose__body .payment-opt').on('click', '.payment-opt__item', function(event) {
                var payment = $(this).find('input').val();
                var wording = $(this).find('input').siblings('label').find('.selectReward__nama-reward').text();
                $('.floatSelect-value').val(payment);
                $('.floatSelect-choose').addClass('hidden');
                $('#rewardItem').text(wording);

                var nominal = $('#nominalDonasi').val(),
                nominal = nominal.replace(/\./g, ''),
                nominalInt = parseInt(nominal),
                minDonate = $(this).find('.selectReward__minimal-donasi').data('mindonasi');

                if( minDonate > nominalInt){
                    $('#nominalDonasi').autoNumeric('set', minDonate);
                }
            });

            $('.floatSelect-choose').on('click', function(event) {
                if(!$(event.target).is('.floatSelect-choose__body')){
                    $('.floatSelect-choose').addClass('hidden');
                }
            });
        },

        /*
          133
          Halaman: Reward Campaign
          Platform : Mobile
          Fungsi : Event hanler untuk upload file, tab handler dan beberapa button
        */
        pwaRewardAction: function() {
            var libraryRequired = function() {
                if($('.auto-num')[0]){
                    var $form       = $('.auto-num');
                    var $inputValue = $('.auto-num-input');
                    var minValue    = $inputValue.data('min');

                    if ( !$inputValue.length ) return;

                    Modernizr.load({
                        load    : assets._autoNum,
                        complete: function () {
                            // Create thousands separator value
                            $inputValue.autoNumeric({
                                digitGroupSeparator: '.',
                                decimalCharacter: ',',
                                allowDecimalPadding: false
                            });

                            // Get non-separator value
                            function getValue() {
                                var value = $inputValue.autoNumeric('get');
                                return value;
                            }

                            // Validate field with the non-separator value
                            $inputValue.on('keyup paste', function () {
                                var value = getValue();

                                $inputValue.data('value', value);
                            });

                            // Submit non-separator value
                            $form.on('submit', function () {
                                $inputValue.val($inputValue.autoNumeric('get'));
                            });
                        }
                    });
                }

                var $inputFile      = $('.form-input--file');
                // var $cover          = $('.cover-campaign--img');

                $inputFile.on('change', function () {
                    var $cover      = $(this).siblings('label').find('.cover-campaign--img');
                    var $ktp        = $(this).siblings('#ktp');
                    var $avatar     = $(this).siblings('#profpict');

                    if (typeof (FileReader) != "undefined") {

                        var image_holder = $("#image-holder");

                        var reader = new FileReader();
                        reader.onload = function (e) {
                            // $("<img />", {
                            //     "src": e.target.result,
                            //     "class": "thumb-image"
                            // }).appendTo(image_holder);

                            var bg = e.target.result;

                            $cover.css('background-image', 'url('+bg+')');
                            $ktp.text(bg);
                            $avatar.text(bg);
                        }

                        // image_holder.show();
                        reader.readAsDataURL($(this)[0].files[0]);
                    } else {
                        alert("This browser does not support FileReader.");
                    }
                });

                var $validate = $('[data-validate]');
                if ( !$validate.length ) return;

                $validate.bazeValidate({
                    msgEmpty        : 'Harap isi bidang ini',
                    classInvalid    : 'form-input--error',
                    classValid      : 'form-input--success',
                    msgNumber       : 'Harap isi bidang ini'
                })
            }

            var shipmentOpt = function() {
                var dataShipment = $(this).val();

                if(dataShipment == 'no-shipment'){
                        $('.shipping-detail').addClass('hidden');
                        $('.shipping-detail').find('input').removeAttr('required');
                        $('.reward-weight').attr('min', 0);
                        $('.chosen-select').removeAttr('required');
                }else{
                    $('.shipping-detail').removeClass('hidden');
                    $('.shipping-detail').find('input').attr('required');
                    $('.reward-weight').attr('min', 1);
                    $('.chosen-select').attr('required');
                    document.querySelector('.chosen-select').selectedIndex = 1;
                    $('.chosen-select').trigger('chosen:updated');
                }
            }

            $('#reward').ready(function(){

                if(!$('#template-blank').length) return;

                var source = $('#template-blank').html(),
                template = Handlebars.compile(source);

                $('#form-section').append(template);

                libraryRequired();
            });

            $('.page-tab--reward').on('click', 'li.page-tab__item', function(){
                event.preventDefault();
                $('.page-tab--reward li.page-tab__item').removeClass('active');
                $(this).addClass('active');
                $('.page-tab__target').addClass('hidden');
                var target = $(this).find('a').attr('href');
                var shipment = $(target).find('.shipment-option');

                $(shipment).on('change', shipmentOpt)

                libraryRequired();

                $(target).removeClass('hidden');

            });

            $('.tambahReward-btn').on('click', function(event){
                event.preventDefault();
                var target = $(this).attr('href');
                $('.page-tab--reward li').removeClass('active');
                $('.page-tab--reward li:eq(1)').addClass('active');
                $('.page-tab__target').addClass('hidden');

                $(target).removeClass('hidden');

                $('#form-section form').remove();

                if(!$('#template-blank').length) return;

                var source = $('#template-blank').html(),
                template = Handlebars.compile(source);



                var appendedEl = $(target).append(template);

                var shipment = $(appendedEl).find('.shipment-option');

                $(shipment).on('change', shipmentOpt);

                libraryRequired();
            });

            $('#overview').on('click', '.pwaReward--edit', function(event){
                event.preventDefault();
                $('#form-section form').remove();
                $('.page-tab__target').addClass('hidden');

                if(!$('#template').length) return;

                var source = $('#template').html();
                var template = Handlebars.compile(source);
                var url      = $(this).attr('data-load');

                $.getJSON(url, function(json, textStatus) {
                    var targetData = template(json);

                    var rewardType = json.type;

                    $('.page-tab--reward li').removeClass('active');

                    $('.page-tab--reward li:eq(1)').addClass('active');

                    $('#form-section').removeClass('hidden');

                    var appendedEl = $('#form-section').append(targetData);

                    var shipment = $(appendedEl).find('.shipment-option');

                    if($(shipment).val() == 'no-shipment'){
                        $('.shipping-detail').addClass('hidden');
                        $('.shipping-detail').find('input').removeAttr('required');
                        $('.reward-weight').attr('min', 0);
                        $('.chosen-select').removeAttr('required');
                    }else{
                        $('.shipping-detail').removeClass('hidden');
                        $('.shipping-detail').find('input').attr('required');
                        $('.reward-weight').attr('min', 1);
                        $('.chosen-select').attr('required');
                        document.querySelector('.chosen-select').selectedIndex = 1;
                        $('.chosen-select').trigger('chosen:updated');
                    }

                    $(shipment).on('change', shipmentOpt);

                    libraryRequired();

                });
            });

            $('.saveReward').on('click', function(){
                var qty = $('.qty-reward').val();
                var donationVal = $('.donation-min').val();
                var donationTrim = donationVal.replace(/[^\d]/g, "");
                var donation = parseInt(donationTrim);

                var $validate = $('[data-validate]');
                if ( !$validate.length ) return;
                $validate.bazeValidate({
                    msgEmpty        : 'Harap isi bidang ini',
                    classInvalid    : 'form-input--error',
                    classValid      : 'form-input--success',
                    msgNumber       : 'Harap isi bidang ini'
                });

                if (qty < 0) {
                    $('.err').remove();
                    $('.msg-error').remove();
                    $('.qty-reward').removeClass('form-input--success');
                    $('.qty-reward').addClass('form-input--error');
                    $('.qty-reward').after('<div class="err" style="color:red"><b>Nilai minimal adalah 0.</b></div>');
                    event.preventDefault();
                }

                if (qty > -1) {
                    $('.err').remove();
                    $('.qty-reward').addClass('form-input--success');
                }

                var min = parseInt($('.donation-min').attr('data-donation'));
                var max = parseInt($('.donation-min').attr('data-donation')) - 1;

                if (donation < min) {
                    $('.donation-min').removeClass('form-input--success');
                    $('.donation-min').addClass('form-input--error');
                    $('.err-d').remove();
                    $('.donation-min').after('<div class="err-d" style="color:red"><b>Nilai minimal adalah ' + min +'</b></div>');

                    event.preventDefault();
                }

                if (donation > max) {
                    $('.err-d').remove();
                    $('qty-reward').addClass('form-input--success');
                }

            });
        },

        /*
          134
          Halaman: Login , Donation Step 2
          Platform : Mobile dan Desktop
          Fungsi : Event handler untuk validasi email
        */
        nextSection: function(){
            $('.btn--next').on('click', function(event){
                event.preventDefault();

                var inputText = $('.inputText');
                var isEmptyText = $(inputText).val();

                var inputEmail = $('.inputEmail');
                var re = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;
                var isEmptyEmail = $(inputEmail).val();
                var valInputEmail = re.test(isEmptyEmail);

                // remove class error to restart styling after first validation
                function removeErrStyle(inputEl, callback){
                    inputEl.siblings('.label-input-error').remove();
                    inputEl.removeClass('error');

                    // if callback is not a function, dont call the callback
                    typeof callback === 'function' && callback(inputEl);
                }

                // append Error
                function appendErrText(inputEl) {
                    // get errname from each input 
                    var errElement = inputEl.data('errname');
                    // append error text based on error name
                    var errInputText = '<p class="label-input-error">' +errElement+ ' tidak boleh dikosongkan.</p>';
                    inputEl.addClass('error')
                    inputEl.after(errInputText);
                }

                var errInputEmail = '<p class="label-input-error">Alamat Email tidak valid.</p>';

                if(isEmptyText == false){
                    removeErrStyle($(inputText), appendErrText);
                }else{
                    removeErrStyle($(inputText));
                    var text = 'valid';
                }

                if(isEmptyEmail == false){
                    removeErrStyle($(inputEmail), appendErrText);
                }
                else if(valInputEmail == false){
                    $(inputEmail).siblings('.label-input-error').remove();
                    $(inputEmail).addClass('error');
                    $(inputEmail).after(errInputEmail);
                }else{
                    removeErrStyle($(inputEmail));
                    var email = 'valid';
                }

                if(text == 'valid' && email == 'valid') {
                    var parentSection = $(this).parents('section:last');
                    var target = $(this).attr('href');

                    $(parentSection).addClass('hidden');
                    $(target).removeClass('hidden');
                }
            });
        },

        /*
          135
          Halaman: Dashboard verified Share Campaign
          Platform : Desktop dan Mobile
          Fungsi : Ketika diklik akan memunculkan parent selanjutnya dan ketika diklik kembali akan kembali ke halaman berikutnya
        */
        sharePrevNext: function(){
            var next = $('.next-section');
            var prev = $('.prev-section');

            $(next).on('click', function(event){
                event.preventDefault();
                var parent = $(this).parents('section');
                var next = $(parent).next('section');
                $(parent).addClass('hidden');
                $(next).removeClass('hidden');
            });

            $(prev).on('click', function(event){
                event.preventDefault();
                var parent = $(this).parents('section');
                var prev = $(parent).prev('section');
                $(parent).addClass('hidden');
                $(prev).removeClass('hidden');
            });
        },

        /*
          136
          Halaman: Dashboard verified Share Campaign
          Platform : Desktop dan Mobile
          Fungsi : Ketika diklik akan memunculkan parent selanjutnya dan ketika diklik kembali akan kembali ke halaman berikutnya
        */
        pwatogglePost: function(){
            var $trigger = $('.pwa-detail-post');

            $trigger.on('click', function(){
                var prevItem = $(this).prev();
                var fa = $(this).find('.fa');

                if($(this).hasClass('is-active')){
                    prevItem.removeClass('is-active');
                    fa.removeClass('fa-minus-circle');
                    fa.addClass('fa-plus-circle');
                    fa.siblings().text('Baca selengkapnya');
                    $(this).removeClass('is-active');
                } else{
                    prevItem.addClass('is-active');
                    fa.addClass('fa-minus-circle');
                    fa.removeClass('fa-plus-circle');
                    fa.siblings().text('Baca sebelumnya');
                    $(this).addClass('is-active');
                }
            });
        },

        /*
          137
          Halaman: Create Campaign dan Campaign Register
          Platform : Desktop dan Mobile
          Fungsi : Ketika diklik akan memunculkan parent selanjutnya dan ketika diklik kembali akan kembali ke halaman berikutnya
        */
        zeroDefaultInput: function(){
            $('.input--zero').on('focus', function(){
                ($(this).val() == '0') &&  $(this).val('');
            });
        },

        /*
          138
          Halaman: Error Input Form with Icon
          Platform : Desktop dan Mobile
          Fungsi : Ketika diklik close pada message error, maka message tersebut diclose
        */
        errorInputFormWithIcon: function(){
            var $p = $('.form-icon__err');
            var $close = $p.find('.errClose');

            $(document).ready(function() {
                if(!$p.length) return;

                $p.slideToggle(500);
            });

            $close.on('click', function(){
                $p.slideToggle(500);
            });
        },

        /*
          139
          Halaman: Error Input Form with Icon
          Platform : Desktop dan Mobile
          Fungsi : Ketika diklik close pada message error, maka message tersebut diclose
        */
        disclaimerCheckbox: function(){
            var $trigger = $('#tnc-disclaimer input');
            var target = $trigger.data('target');

                if(!$trigger.length) return;

                $trigger.on('change', function(){
                    if($(this).is(':checked')){
                        $(target).removeClass('btn--disabled');
                    }
                    else{
                        $(target).addClass('btn--disabled');
                    }
                });
        },

        /*
          140
          Halaman: FAQ
          Platform : Mobile
          Fungsi : Mengetahui item mana yang dituju sesuai parameter
        */
        carouselPwa: function(){
            var parent = $('.carousel--pwa'),
                carouselNav = $('.carousel__item');
                carouselContent = $('.switcher__content');

            var param = ($(parent).data('params') - 1);

            if(!parent.length) return;

            $(document).ready(function() {
                if(param == 998) return;
                var activeNav = $('.carousel__item:eq('+param+')');

                $(carouselNav).removeClass('active');
                $(activeNav).addClass('active');

                var activeContent = $(activeNav).data('target');

                $(carouselContent).removeClass('active');
                $(activeContent).addClass('active');

            });
        },

        /*
          141
          Halaman: FAQ
          Platform : Mobile
          Fungsi : Ketika input berubah / gambar berhasil diupload , maka label nya akan hilang
        */
        iconOnImageChange: function(){
            $('.form-input--changed').on('change', function(){
                var fileValue = $(this).val();
                var file = $(this).siblings('.label-file').find('.input--changed');
                $(file).css('z-index', '4');
            })
        },

        /*
          142
          Halaman: Campaign register
          Platform : Mobile
          Fungsi : Ketika diklik drop down akan memunculkan modal pilihan
        */
        changeWidthDropdown: function(){
            var deadlineType =  $('.dropdown--block .dropdown__opt__item.active')
            var startData = $(deadlineType).find('input').val();
            var blockDropdown = $(deadlineType).closest('.dropdown--block');
            var parent = $(blockDropdown).parent();
            var next = $(parent).next();

            if(!$('.dropdown--block').length) return;

            var setDropBehaviour = function(data){
                if(data == 'forever_running'){
                    $(blockDropdown).removeClass('dropdown--blue');
                    $(parent).addClass('col--s12');
                    $(next).addClass('hidden');
                }else{
                    $(blockDropdown).addClass('dropdown--blue');
                    $(parent).removeClass('col--s12');
                    $(next).removeClass('hidden');
                }
            }

            setDropBehaviour(startData);

            $('.dropdown--block .dropdown__opt').on('click', '.dropdown__opt__item', function(event) {
                event.preventDefault();
                var data    = $(this).find('input').val();
                var blockDropdown = $(this).closest('.dropdown--block');
                var parent = $(blockDropdown).parent();
                var next = $(parent).next();

                setDropBehaviour(data);

            });
        },

        /*
          143
          Halaman: Campaign register
          Platform : Mobile
          Fungsi : Ketika diklik icon show password maka akan mengganti text dan mengganti stylenya
        */

        hideShowPassword: function(){
            var $field= $('#showPassField'),
                $control = $('#togglePass__input');

            if(!$field.length) return;

            $.toggleShowPassword = function(options){
                var setting = $.extend({
                    field: '#password',
                    control: '#toggle_show_password',
                }, options);

                var field  = $(setting.field);
                var control = $(setting.control);

                control.bind('click', function(event) {
                    var parent = control.parent(),
                        fa     = parent.find('.fa');

                    if(control.is(':checked')){
                        field.attr('type', 'text');
                        parent.css('color', '#00aeef');
                        fa.removeClass('fa-eye-slash');
                        fa.addClass('fa-eye');
                    }else{
                        field.attr('type', 'password');
                        parent.css('color', '#999999');
                        fa.removeClass('fa-eye');
                        fa.addClass('fa-eye-slash');
                    }
                });
            }

            $.toggleShowPassword({
                field: $field,
                control: $control
            });
        },

        /*
          144
          Halaman: Awal
          Platform : Mobile
          Fungsi : Ketika lakan melakukan pencarian maka over
        */
        searchBarOverlay: function(){
            var searchBar = $('.pwa-form--banner');

            $(searchBar).on('click', '.btn--search, .search-bar-overlay__btn' ,function(event) {
                $(searchBar).removeClass('has-overlay');
            });
        },
        dashboardMenu: function(){
            var $dashboard = $('.dashboard-page--new');
            var $menu = $dashboard.find('.dashboard-menu li a');


            if (!$dashboard.length) return;

            $dashboard.on('click', '.dashboard-menu li a', function(event) {
                event.preventDefault;

                $menu.removeClass('active');
                $(this).addClass('active');
                /* Act on the event */
            });

            $dashboard.on('click', '.dashboard-menu li .sub-nav-trigger', function(event) {
                event.preventDefault();
                var $icon = $(this).find('.fa');
                $(this).next().toggleClass('is-show');

                if($icon.hasClass('fa-chevron-down')){
                    $icon.removeClass('fa-chevron-down');
                    $icon.addClass('fa-minus');
                }else{
                    $icon.addClass('fa-chevron-down');
                    $icon.removeClass('fa-minus');
                }
            });

            var $activeSubNav = $dashboard.find('.dashboard-menu li .sub-nav-trigger.active');

            if ($activeSubNav.length) {
                var $icon = $activeSubNav.find('.fa');

                if($icon.hasClass('fa-chevron-down')){
                    $icon.removeClass('fa-chevron-down');
                    $icon.addClass('fa-minus');
                }else{
                    $icon.addClass('fa-chevron-down');
                    $icon.removeClass('fa-minus');
                }
            };
        },

        toggleComponentList: function(){
            var wrapper = $('.component-wrapper');

            $(wrapper).each(function() {
                var $trigger = $(this).find('.component-trigger');

                $(this).on('click', '.component-trigger', function(event) {
                event.preventDefault();

                var content = $(wrapper).find('.component-content');
                var target = $(this).data('target');

                $trigger.removeClass('active');
                $(this).addClass('active');

                $(content).addClass('hidden');
                $(target).removeClass('hidden');
                });
            });
        },

        //Fungsi ini digunakan untuk memunculkan toggle tooltip social media
        // di halaman campaign dekstop dan PWA.
        /*
          145
          Halaman: Project Detail
          Platform : Mobile dan Desktop
          Fungsi : Event handler untuk memunculkan tooltip ketika user klik link sosmed
        */
        toggleComponent: function(){
            var $toggle = $('.component-toggle--single');

            if(!$toggle.length) return;


            var eventToggle = 'click';

            //sebelum memanggil fungsi togglenya, dicek dulu versi OS device
            //jika IOS 7, maka eventnya menggunakan touchstart, jika tidak click
            function checkOS(callback) {
                var os = {
                    s: 'iOS',
                    r: /(iPhone|iPad|iPod)/,
                };

                var nAgt = navigator.userAgent;
                var nVer = navigator.appVersion;

                if(os.r.test(nAgt)){
                    osVersion = /OS (\d+)_(\d+)_?(\d+)?/.exec(nVer);
                    osVersion = osVersion[1];

                    if(osVersion === '7') {
                        eventToggle = 'touchstart';
                    }
                }
                callback(eventToggle);

            }

            function handleToggleComponent(eventToggle) {
                $toggle.each(function() {
                    $(this).on(eventToggle, function(event) {
                        // event.preventDefault();
                        // event.stopPropagation();

                        $(this).siblings('.component-content--single').toggleClass('hidden');
                        return false;
                    });
                });
            }

            checkOS(handleToggleComponent);

            $('body').on('click', function(event) {
                var $content = $('.component-content--single');
                if(!$content.is(event.target) && $content.find(event.target).length === 0)
                {
                    $content.addClass('hidden');
                }
            });
        },

        /*
          146
          Halaman: Project Detail
          Platform : Desktop
          Fungsi : Event handler untuk memunculkan embed content
        */
        contentActivateToggle: function() {
            var $toggle = $('.js-content-activate');

            if(!$toggle.length) return;

            $toggle.on('click', function(event) {
                event.preventDefault();
                var target = $(this).data('target');
                $(target).toggle();
            });
        },

        /*
          147
          Halaman: Project Detail
          Platform : Desktop
          Fungsi : Mengambil tanggal sekarang lalu , ketika diklik akan menghilangkan placeholder sekarang
        */
        todayDatePicker: function() {
            var today = moment().add(0, 'days').format("YYYY-MM-DD");

            $('#today-date').each(function() {

                var el = $(this),
                    type = $(el).attr('type');

                if ($(el).val() == '') {
                    $(el).addClass('placeholderclass');
                }

                $(el).click(function() {
                    $(el).attr('type', type);
                    $(el).removeClass('placeholderclass');
                });

                $(el).blur(function() {
                    if ($(el).val() == '') {
                        $(el).addClass('placeholderclass');
                    }
                });
            });
        },

        /*
          148
          Halaman: About us, dashboard
          Platform : Desktop
          Fungsi : Event handler ketika diklik maka akan merubah icon humberger menu, lalu menampilkan pilihan user
        */
        usrMenuDropdown: function(){
            var $trigger = $('#navbar-toggle'),
                $dropdownList = $trigger.siblings('.header-actions__dropdown-list');

            $trigger.on('click', function(event) {
                event.preventDefault();
                event.stopPropagation();

                $(this).toggleClass('active');
                $dropdownList.toggleClass('hidden');
            });

            $('body').on('click', function(event) {
                if(!$(event.target).is('.header-actions__dropdown-list'))
                {
                    $dropdownList.addClass('hidden');
                    $trigger.removeClass('active');
                }
            });
        },

        /*
          149
          Halaman: About us, dashboard
          Platform : Desktop
          Fungsi : Header berubah ketika discroll sudah melebihi 50px, maka header akan berganti warna dan logo juga akan berubah
        */
        activateHeader: function(){
            var    $header          = $('.site-header'),
                   $headerDrop      = $('.header-search-drop'),
                   $logoUnactive    = $('#site-logo__header-unactive'),
                   $logoActive      = $('#site-logo__header-active');

            var scrolled = function(){
                if($(document).scrollTop() > 50 || $headerDrop.is(':focus')){
                    $header.addClass('active');
                    $logoUnactive.addClass('hidden');
                    $logoActive.removeClass('hidden');
                }else{
                    $header.removeClass('active');
                    $logoUnactive.removeClass('hidden');
                    $logoActive.addClass('hidden');
                }
            }

            scrolled();

            $(document).scroll(function(event) {
                scrolled();
            });
        },

        /*
          150
          Halaman: Campaign Detail 4
          Platform : Mobile
          Fungsi : Ketika close button tutorial diklik, maka overlay yang menutup page akan hilang
        */
        closeOverlayContent: function(){
            var close = $('.close-overlay'),
                overlay = $('.overlay--fixed'),
                target = $(close).data('target');

            $(close).on('click',  function(event) {
                event.preventDefault();
                $(overlay).addClass('hidden');
                $(target).addClass('hidden');
            });
        },

        /*
          151
          Halaman: Campaign Detail 4
          Platform : Mobile
          Fungsi : Button untuk kembali ke posisi paling atas
        */
        goToTopBtn: function(){
            var btn = $('#btn-to-top');

            // $(btn).hide(); // hide on page load

                $(window).on('scroll', function(){
                    if($(this).scrollTop() > 1200) { // show after 2000 px of user scrolling
                        $(btn).removeClass('hidden');
                    }else{
                        $(btn).addClass('hidden');
                    }
                });

                $(btn).on('click', function(event) {
                    event.preventDefault();
                    $('html, body').animate({
                        scrollTop: 0
                    }, 100);
                });
        },

        /*
          152
          Halaman: Campaign Detail 4
          Platform : Mobile
          Fungsi : Menampilkan beberapa tip
        */
        tourTip: function(){
            var $tip = $('.pwa-campaign-tip'),
                $next = $tip.find('.pwa-campaign-tip__close'),
                $overlay = $('.overlay--fixed'),
                $hilite = $('.pwa-campaign-tip__hilite'),
                $wrapper = $('.pwa-wrapper');

            if($overlay.hasClass('active')) $('body').addClass('active');

            $next.css('cursor', 'pointer');

            $next.on('click touchstart', function(event) {
                event.preventDefault();
                var nextTip = $(this).data('next');
                var nextHilite = $(this).data('hilite');

                if(nextTip){
                    var $nextHilite = $(nextHilite);
                    var $nextHilite_top = $nextHilite.position().top;

                    $('body').removeClass('active');
                    $wrapper.removeClass('active');
                    $next.closest('.pwa-campaign-tip__hilite').removeClass('active');
                    $tip.addClass('hidden');
                    $(nextTip).removeClass('hidden');
                    $(nextHilite).addClass('active');

                    $('html, body').animate({
                        scrollTop: $nextHilite_top - 200
                    }, 10);

                    $('body').addClass('active');
                    $wrapper.addClass('active');
                    $('.pwa-wrapper.active').css('top','0px');
                }else{
                    $overlay.addClass('hidden');
                    $hilite.removeClass('active');
                    $tip.addClass('hidden');
                    $('body').removeClass('active');
                }
            });

        },

        // Page: survey form
        // Function: to fill in placeholder when value of input date is not filled yet
        // Platform: PWA
        placeholderDate: function(){
            var el = $('.form-input--date'),
                type = $(el).attr('type');

            $(el).on("focus", function(){
                if($(this).val() == ''){
                    $(this).addClass("full");
                }
            });

            $(el).on("blur", function(){
                if($(this).val() == ''){
                    $(this).removeClass("full");
                }
            });
        },

        // Page: feature and pricing
        // Function: to create same height cells in a table
        // Platform: PWA
        createSameHeightCells: function(){
            function createSameHeight(){
                var $p = $('.aboutUs__table-wrapper');

                $p.each(function() {

                    var $items = $(this).find('.carousel__item');

                    var $cells = $items.eq(1).find('li');

                    var tinggi = [];
                    var tempArrayCells = [];
                    var arrayCells = [];
                    var arrayHeight = [];

                    for (var j = 0; j <= $cells.length - 1; j++) {
                        tempArrayCells.length = 0;
                        for (var i = 0; i <= $items.length - 1; i++){
                            cellsHeight = $items.eq(i).find('li').eq(j).outerHeight();

                            tempArrayCells.push(cellsHeight);
                        };

                        arrayCells[j] = tempArrayCells;
                        ValMaxHeight = Math.max.apply(Math, arrayCells[j]);
                        arrayHeight.push(ValMaxHeight);
                    };

                    for (var j = 0; j <= $cells.length - 1; j++) {
                        for (var i = 0; i <= $items.length - 1; i++){
                            $items.eq(i).find('li').eq(j).outerHeight(arrayHeight[j]);
                        }
                    };
                });
            }


            Modernizr.load({
                load    : assets._slick,
                complete: function(){

                    var $el = $('.carousel--about');

                    $el.slick({
                        infinite    : false,
                        dots        : true,
                        slidesToShow: 1
                    });

                    createSameHeight();
                }
            })
        },

        // Page: campaign page and unsubscribe page
        // Function: toggle modal
        // Platform: campaign page (desktop) and unsubscribe(desktop and PWA)
        modalToggle: function(){
            $('.modal-toggle').click(function(event) {
                event.preventDefault();
                var target = $(this).data('target');
                $('body').addClass('active');
                $('.site-main').css('z-index', 'auto');
                $(target).toggleClass('show hidden');
            });

            $('.modal-toggled__content').on('click', '.modal__bg, .modal-toggle__cancel-btn, .modal__close' , function(event) {
                event.preventDefault();
                $(this).parents('.modal-toggled__content').toggleClass('show hidden');
                $('body').removeClass('active');
                // $('.site-main').css('position', 'relative');
                $('.site-main').css('z-index', '1');
            });
        },

        // Page: on all page that require number input
        // Function: to validate user input so user only can type number to that input
        // Platform: desktop and PWA
        onlyNumberInput: function(){
            var $el = $('.input-only-number');

            $el.on('keydown', function(e) {
               if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||
                     // Allow: Ctrl/cmd+A
                    (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||
                     // Allow: Ctrl/cmd+C
                    (e.keyCode == 67 && (e.ctrlKey === true || e.metaKey === true)) ||
                     // Allow: Ctrl/cmd+X
                    (e.keyCode == 88 && (e.ctrlKey === true || e.metaKey === true)) ||
                     // Allow: Ctrl/cmd+V
                    (e.keyCode == 86 && (e.ctrlKey === true || e.metaKey === true)) ||
                     // Allow: home, end, left, right
                    (e.keyCode >= 35 && e.keyCode <= 39)) {
                         // let it happen, don't do anything
                         return;

                }
                // Ensure that it is not a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
            });
        },

        // Page: check-phone-number-after-create-campaign page
        // Function: to toggle editable input
        // Platform: desktop and PWA
        editDisabledInput: function(){
            var $p = $('.form-editable'),
                $tr = $p.find('.form-input__edit-btn');

            if(!$p.length) return;

            if($p.hasClass('is-not-empty') ){
                var targetInfo = $p.data('info');
                $(targetInfo).text('Pastikan nomor handphone kamu di bawah ini benar');

                $tr.removeClass('hidden');

                $p.find('.form-input--edit').prop('readonly', true);
            };


            $tr.on('click', function(event) {
                event.preventDefault();

                var input = $(this).siblings('.form-input'),
                    inputVal = $(input).val();

                $(input).removeAttr('readonly');

                $(input).focus();
                $(input).val('');
                $(input).val(inputVal);

                var targetInfo = $p.data('info');
                $(targetInfo).text('Masukkan nomor handphone yang dapat dihubungi');
                $(this).hide();

            });
        },

        // Page: campaign page
        // Function: for validator input, and minimum 1.000.000
        // Platform: desktop
        validateNumber : function(){
            //forbidden just allow input number
            $("#donasi-validation").keydown(function (e) {
              var inputNumber = $("#donasi-validation").val();
                // Allow: backspace, delete, tab, escape, enter and .
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||
                     // Allow: Ctrl/cmd+A
                    (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||
                     // Allow: Ctrl/cmd+C
                    (e.keyCode == 67 && (e.ctrlKey === true || e.metaKey === true)) ||
                     // Allow: Ctrl/cmd+X
                    (e.keyCode == 88 && (e.ctrlKey === true || e.metaKey === true)) ||
                     // Allow: home, end, left, right
                    (e.keyCode >= 35 && e.keyCode <= 39)) {
                         // let it happen, don't do anything
                         return;

                }
                // Ensure that it is not a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
            });

            //replace from 1000 => 1.000
            $('#donasi-validation').on('input', function() {
              /*
                 we dont just get value, but before we must replace ".",
                 case if you type value 1.000, that's will detect 1 not 1000
              */
              var checkedNew = $(this).val().split('.').join("");
              var nilai = parseInt(checkedNew)

              var	number_string = nilai.toString(),
                	sisa 	= number_string.length % 3,
                	rupiah 	= number_string.substr(0, sisa),
                	ribuan 	= number_string.substr(sisa).match(/\d{3}/g); //separator regex 3 for match number after "."

                if (ribuan) {
                	separator = sisa ? '.' : '';
                	rupiah += separator + ribuan.join('.');
              }
              //and then replace
              $(this).val(rupiah);

            });

          $('#form-donate-validation').submit(function(){
              var checkedNew = $('#donasi-validation').val().split('.').join("");
              var nilai = parseInt(checkedNew)
              if (nilai < 1000000 || isNaN(nilai)){
                $('<span class="text-error-label">Minimal target donasi Rp 1.000.000</span>').insertAfter( "#donasi-validation" );
                return false;
              }else {
                $( ".text-error-label" ).remove();
                return true;
              }
            })
        },

        // Page: on all page that require ajax call
        // Function for load ajax, triggered by click a button
        // Platform: desktop
        btnAjaxLoad: function(){
            if(!$('.js-ajax-trigger').length) return;

            var btn = $('.js-ajax-trigger'),
                holderElement = $(btn).data('target'), //element that will appended to
                template = $('#template').html(), //template that we'll use
                compile = Handlebars.compile(template); //compile template without data
            // check if trigger will be change its layout (has attribute change_trigger)
            var isChangingTrigger = $('.js-ajax-trigger[data-change_trigger]').length > 0;

            //change trigger layout to bar loading
            function changeTrigger(trigger) {
                trigger.toggleClass('btn--blue btn--plain');
                trigger.css('width', '400px');
                trigger.html('<div class="bar-loading infinite no-margin-bottom"></div>');

                // delete previous class, activate class for trigger-bar-loading, 
                // create promise and call next ajax function 
                trigger.toggleClass('js-ajax-trigger js-pwa-ajax-trigger').promise().done( function() {
                    Site.pwaAjaxLoad();
                });
            }

            $(btn).on('click', function(event) {
                event.preventDefault();
                //url to get the data
                var url = $(this).attr('data-load'),
                    that = $(this);

                $.getJSON(url, function(json) {
                    //if next data is empty, remove the button
                    if(json.next === ""){
                        that.remove()
                    }

                    //compile data that we,ve had from url
                    var targetData = compile(json);
                    $(holderElement).append(targetData);
                    //change the attr data-load for the next url
                    that.attr('data-load', json.next);
                    // if trigger layout have to be changed
                    if(isChangingTrigger) {
                        changeTrigger(that);
                    }
                });
            });
        },

        // Page: on all page that require ajax call
        // Function for load ajax, triggered by scroll event
        // Platform: PWA
        pwaAjaxLoad: function() {
            if(!$('#template').length) return;
            var source = $('#template').html(),
                //trigger for ajax call
                $trigger = $('.js-pwa-ajax-trigger'),
                template = Handlebars.compile(source),
                isMultipleAjaxPage = $('.js-pwa-ajax-tab').length > 0;
                // check if ajax trigger is to create timeout between calls (has attribute timeoutCall)
                isTimeoutRequest = $('.js-pwa-ajax-trigger[data-timeout_call]').length > 0;

            //return if trigger dont exist
            if(!$trigger.length) return

            function handleScroll() {
                //check if the page is campaign page
                if(isMultipleAjaxPage){
                    var $activeTab = $('.js-pwa-ajax-tab.active');
                    //find the trigger from active tab
                    var $trigger = $activeTab.find('.js-pwa-ajax-trigger')
                }else{
                    //find the trigger if its not campaign page
                    var $trigger = $('.js-pwa-ajax-trigger')
                }

                //return if trigger dont exist on certain tab on campaign page
                if(!$trigger.length) return

                //Check if a user has scrolled bottom
                var isEndOfBottom = $(window).scrollTop() + $(window).height() >= $trigger.offset().top - 100;
                if(isEndOfBottom) {
                    // if the ajax call has a timeout
                    if(isTimeoutRequest){
                        clearTimeout(window.timer);
                        window.timer = setTimeout( function() {
                            requestData($trigger);
                        }, 2000)
                    } else {
                        requestData($trigger);
                    }
                }
            }

            //set initial loading state to false
            var isLoading =  false
            handleScroll()
            $(window).on('scroll', handleScroll);

            //request the data
            function requestData($trigger){
                var url = $trigger.attr('data-load');
                var target = $trigger.attr('data-target');

                if(url){
                    //check if ajax loads the data or not
                    if(isLoading) return
                    //assign isLoading when ajax loads data
                    isLoading = true
                }

                $.ajax({
                    url: url,
                    dataType: 'json',
                    success: function(json) {
                        //define the target data from json
                        var targetData = template(json)
                        //append data
                        $(target).append(targetData)

                        //if the data is empty, hide the trigger
                        if(json.next === ''){
                            $trigger.addClass('sr-only');
                        };

                        if (json.next.length > 0) {
                            $trigger.removeClass('sr-only');
                        };
                        //change url for the next data when its appended
                        $trigger.attr('data-load', json.next);
                        // $trigger.removeClass('clickable');

                        //fire again the scroll event
                        // $(window).on('scroll', handleScroll)
                        //set the state to false when the request data process is done
                        isLoading = false
                        return
                    },
                    complete: function(){

                    }
                })
            }
        },

        // Page: on all page that require ajax with timeout
        // Function: to load ajax, first ajax call triggered by button click, next ajax call triggered by scroll with timeout
        // Platform: Desktop
        // ajaxWithTimeout: function() {
        //     var $trigger = $('.js-ajax-trigger--timeout');

        //     if( !$trigger.length ) return;

        //     var holderElement = $trigger.data('target'), //element that will appended to
        //         source = $('#template').html(), //template that we'll use
        //         template = Handlebars.compile(source); //compile template without data

        //     var isLoading =  false;

        //     function requestDataWithTimeout(trigger){
        //         var url = trigger.attr('data-load');
        //         var target = trigger.attr('data-target');

        //         if(url){
        //             //check if ajax loads the data or not
        //             if(isLoading) return
        //             //assign isLoading when ajax loads data
        //             isLoading = true
        //         }

        //         $.ajax({
        //             url: url,
        //             dataType: 'json',
        //             success: function(json) {
        //                 //define the target data from json
        //                 var targetData = template(json)
        //                 //append data
        //                 $(target).append(targetData)

        //                 //if the data is empty, hide the trigger
        //                 if(json.next === ''){
        //                     trigger.addClass('sr-only');
        //                 };

        //                 if (json.next.length > 0) {
        //                     trigger.removeClass('sr-only');
        //                 };
        //                 //change url for the next data when its appended
        //                 trigger.attr('data-load', json.next);
        //                 // $trigger.removeClass('clickable');

        //                 //fire again the scroll event
        //                 // $(window).on('scroll', handleScroll)
        //                 //set the state to false when the request data process is done
        //                 isLoading = false
        //                 return
        //             },
        //             complete: function(){

        //             }
        //         })
        //     }

        //     function handleScroll(trigger) {
        //         //Check if a user has scrolled bottom
        //         var isEndOfBottom = $(window).scrollTop() + $(window).height() >= trigger.offset().top - 200;

        //         if(isEndOfBottom) {
        //             // requestDataWithTimeout(trigger);
        //             clearTimeout(window.timer);
        //             window.timer = setTimeout( function() {
        //                 requestDataWithTimeout(trigger);
        //             }, 2000)
        //         }
        //     }

        //     function changeTrigger(trigger) {
        //         trigger.toggleClass('btn--blue btn--plain');
        //         trigger.css('width', '400px');
        //         trigger.html('<div class="bar-loading infinite no-margin-bottom"></div>');

        //         $(window).on('scroll', function() {
        //             handleScroll(trigger);
        //         })
        //     }

        //     $trigger.on('click', function(event) {
        //         event.preventDefault();
        //         //url to get the data
        //         var url = $(this).data('load'),
        //             that = $(this);

        //         $.ajax({
        //             url: url,
        //             type: 'GET',
        //             dataType: 'json',
        //             success: function(data) {
        //                 if(data.next === ""){
        //                     that.remove()
        //                 }

        //                 //compile data that we,ve had from url
        //                 var targetData = template(data);
        //                 $(holderElement).append(targetData);
        //                 //change the attr data-load for the next url
        //                 that.attr('data-load', data.next);
        //                 // that.data('load', data.next);
        //                 that.unbind('click');
        //             }
        //         })
        //         .done(function() {
        //             changeTrigger($trigger);
        //         })
        //     });
        // },

        // Page: campaign page
        // Function: to count facebook share of a campaign
        // Platform: desktop and PWA
        fbShareCounter: function() {
            var btnShare = $('[data-share-count-fb]'),
                url = $(btnShare).data('href');

            if(!$(btnShare).length) return;

            // this function can blocks external script eg: midtrans snap
            $.getJSON(url, function(json) {
                $(btnShare).find('.counter__number').text(json.share.share_count);
                $(btnShare).removeClass('is-hidden')
            });
        },

        // Page: on all page
        // Function: to show chat widget
        // Platform: PWA
        chatWidget: function() {
            var $chatWidget = $('.js-chat-widget');
            var $footerPWA = $('.pwa-footer');


            if( !$chatWidget.length ) return;

            function setPositionWidget(widget){
                // if positioon Y is not set, position Y fallback to default to 20px
                var posY = widget.data('y') === ''  || typeof widget.data('y') === 'undefined' ? 65 : widget.data('y');
                widget.css("bottom", posY + 'px');
                

            }

            setTimeout(setPositionWidget($chatWidget), 2500);
        },

        // Page: on pages that needs to close container
        // Function: close container when users click outside of container itself
        // Platform: Desktop and PWA
        closeOutsideContainer: function(toggle, container) {
            $(document).click(function(e) {
                // if the target of the click isn't the container nor a descendant of the container
                if ((!toggle.is(e.target)  && toggle.has(e.target).length === 0 ) && (!container.is(e.target) && container.has(e.target).length === 0)) {
                    container.addClass('hidden');
                    console.log(toggle, container);
                }
            });
        },

        // Page: on pages that require slider
        // Function: create slider
        // Platform: Desktop and PWA
        newSlider: function() {
            var $slider = $('.js-banner-slider');

            if(!$slider.length) return;

            Modernizr.load({
                load        : assets._owlCarousel,
                complete    : function() {
                    $slider.owlCarousel({
                        autoWidth: true,
                        lazyLoad: true,
                        loop: true,
                        nav: true,
                        items: 2,
                        navText: ['<span class="material-icons">keyboard_arrow_left</span>','<span class="material-icons">keyboard_arrow_right</span>']
                    });
                }
            })
        }

        };

        var checkJquery = function () {
            Modernizr.load([
            {
                test    : window.jQuery,
                nope    : assets._jquery_local,
                complete: Site.init
            }
            ]);
        };

        Modernizr.load([
        {
            load    : assets._fontawesome_cdn
        },
        {
            load    : assets._jquery_local
        },
        {
            load    : assets._toast
        },
        {
            load    : assets._dataCountdown
        },
        {
            load    : assets._sprintF
        },
        {
            load    : assets._momentJS
        },
        {
            load    : assets._handlebars
        },
        {
            load    : assets._itemslide,
        },
        {
            load    : assets._blurLoad
        },
        {
            load    : assets._bazeValidate,
            complete: checkJquery
        }

        ]);


        window.Site = Site;

    })( window, document );
